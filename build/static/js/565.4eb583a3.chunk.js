"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[565],{1322:function(t,n,e){e.d(n,{$K:function(){return d},$g:function(){return I},AW:function(){return D},Au:function(){return l},BU:function(){return Z},CE:function(){return x},Dx:function(){return C},ES:function(){return V},Et:function(){return z},GB:function(){return f},Gu:function(){return s},IB:function(){return L},Jq:function(){return G},Jr:function(){return k},K3:function(){return p},KI:function(){return N},M$:function(){return _},Mg:function(){return M},Pe:function(){return g},Pw:function(){return H},Q1:function(){return m},RY:function(){return T},S1:function(){return F},T5:function(){return w},T7:function(){return B},Tj:function(){return R},VW:function(){return v},Wo:function(){return K},X2:function(){return Q},X6:function(){return j},Xy:function(){return $},a2:function(){return y},aZ:function(){return u},cW:function(){return O},cn:function(){return P},h8:function(){return E},jK:function(){return S},ji:function(){return i},kR:function(){return W},kl:function(){return h},lQ:function(){return a},oR:function(){return o},r7:function(){return c},ss:function(){return U},ut:function(){return b},uz:function(){return A},xF:function(){return J},zE:function(){return q}});const r=e(5662).Z.create({baseURL:"https://apis.fleetq.live/api/",headers:{"Content-Type":"application/json"}});async function a(t){return(await r.post("company",t)).data}async function o(t){return(await r.delete("company/"+t,t)).data}async function i(t,n){return(await r.patch("company/"+t,n)).data}async function c(t){return(await r.post("company/getAllCompany",t)).data}async function s(t){return(await r.post("truck",t)).data}async function u(t){return(await r.post("truck/getAllTruck",t)).data}async function l(t){return(await r.post("truck/updateTruckStatus",t)).data}async function d(t){return(await r.delete("truck/"+t,t)).data}async function p(t,n){return(await r.patch("truck/"+t,n)).data}async function f(t){return(await r.post("truck/updateTruckBookingStatus",t)).data}async function h(t){return(await r.post("truck/getAllTruckBookings",t)).data}async function g(t){return(await r.post("truck/addTruckToBooking",t)).data}async function y(t){return(await r.post("party/getAllParty",t)).data}async function m(t){return(await r.post("party",t)).data}async function w(t){return(await r.delete(`party/${t}`)).data}async function x(t,n){return(await r.post(`party/${t}`,n)).data}async function j(t){return(await r.put(`party/updateStatus/${t}`)).data}async function k(t){return(await r.post("truck/getAllTruckBookings",{status:t.status})).data}async function v(t){return(await r.post("truck/getInQueueTrucks",t)).data}async function Z(t){return(await r.post("truck/getTruckQueue",t)).data}async function b(t){return(await r.post("allocation/getAllocationDetails",t)).data}async function B(t){return(await r.post("allocation",t)).data}async function S(t){return(await r.post("allocation/changeAllocationStatus",t)).data}async function P(t){return(await r.post("user",t)).data}async function A(t){return(await r.post("user/editUser",t)).data}async function D(t){return(await r.get("user/getAllUsers"+(t?`?companyId=${t}`:""))).data}async function E(t){return(await r.delete(`user/${t}`)).data}async function I(t){const n=await r.post("user/login",t);return console.log(n),n.data}async function T(t){return(await r.post("location/getAllLocation",t)).data}async function C(t){return(await r.post("location",t)).data}async function $(t){return(await r.post("doBooking/getAllDO",t)).data}async function H(t){return(await r.post("allocation/get-All-AllocationDetails",t)).data}async function O(t){return(await r.post("doBooking",t)).data}async function W(t){return(await r.post("doBooking/uploadDO",t)).data}async function _(t,n){try{return(await r.put(`doBooking/updateDO/${t}`,n)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function z(t,n){try{return(await r.post(`doBooking/cancelDO/${t}`,n)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function U(t,n){try{return(await r.post(`doBooking/cancelDOBooking/${t}`,n)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function J(t){try{return(await r.post(`doBooking/reopen-do-booking/${t}`)).data}catch(n){throw console.error("Error cancelling Do booking:",n),n}}async function L(t,n){try{return(await r.post(`allocation/cancel-allocated-booking/${t}`,n)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function R(t){try{return(await r.post(`allocation/re-allocate-booking/${t}`)).data}catch(n){throw console.error("Error cancelling Do booking:",n),n}}async function F(t){return(await r.post("doBooking/getAllDeliveryOrders",t)).data}async function K(t){return(await r.delete("doBooking",t)).data}async function N(t){return(await r.delete("doBooking/deleteDeliveryOrder/"+t)).data}async function Q(t){return(await r.post("driver",t)).data}async function q(t){return(await r.post("driver/getAllDrivers",t)).data}async function G(t){return(await r.post("driver/getCompanyDrivers",t)).data}async function M(t){return(await r.delete("driver/"+t,t)).data}async function V(t,n){return(await r.patch("driver/"+t,n)).data}r.interceptors.request.use((async t=>{const n=localStorage.getItem("token");return n?t.headers.Authorization="Bearer "+n:console.warn("Token not found in localStorage"),t}),(t=>Promise.reject(t))),r.interceptors.response.use((t=>t),(t=>(t.response&&401===t.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),window.location.href="/login"),Promise.reject(t))))},3565:function(t,n,e){e.r(n),e.d(n,{default:function(){return H}});var r=e(7890),a=e(9466),o=e(7313),i=e(9860),c=e(5300),s=e(9019),u=e(2832),l=e(1113),d=e(2247);var p=(0,e(7592).ZP)("div")((t=>{let{theme:n}=t;return{backgroundColor:n.palette.primary.light,minHeight:"100vh"}})),f=e(9536),h=e(3497),g=e(6417);var y=t=>{let{children:n,...e}=t;return(0,g.jsx)(h.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...e,children:(0,g.jsx)(f.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:n})})},m=e(1387),w=e(1550),x=e(3306),j=e(9914),k=e(5480),v=e(1727),Z=e(7131),b=e(1095),B=e(9429),S=e(551),P=e(1730);const A=(0,o.forwardRef)(((t,n)=>{var e,r;let a,o,{children:i,type:c,direction:s,offset:u,scale:l}=t;switch(s){case"up":case"left":a=u,o=0;break;default:a=0,o=u}const[d,p]=(0,S.n)(a,o),[f,h]=(0,S.n)(a,o);switch(c){case"rotate":return(0,g.jsx)(P.E.div,{ref:n,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===s||"down"===s?(0,g.jsx)(P.E.div,{ref:n,animate:{y:void 0!==f?f:""},onHoverEnd:()=>h(),onHoverStart:()=>h(),children:i}):(0,g.jsx)(P.E.div,{ref:n,animate:{x:void 0!==d?d:""},onHoverEnd:()=>p(),onHoverStart:()=>p(),children:i});default:return"number"===typeof l&&(l={hover:l,tap:l}),(0,g.jsx)(P.E.div,{ref:n,whileHover:{scale:null===(e=l)||void 0===e?void 0:e.hover},whileTap:{scale:null===(r=l)||void 0===r?void 0:r.tap},children:i})}}));A.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}};var D=A,E=e(237),I=e(2611);var T=t=>{let{adminLogin:n,...e}=t;const a=(0,i.Z)(),c=(0,r.s0)(),[s,u]=(0,o.useState)(!1),l=()=>{u(!s)},d=t=>{t.preventDefault()};return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(B.J9,{initialValues:{phone:"",password:"",submit:null},onSubmit:async t=>{try{n({phone:t.phone,password:t.password}).then((t=>{console.log(t);let n="admin";t.user.companyId&&(n=t.user.companyId.companyType),localStorage.setItem("role",n),localStorage.setItem("token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user)),m.Am.success("Login Success"),c("admin"==n?"/doUpload":"/dashboard")})).catch((t=>{console.log(t),m.Am.error(t.response.data.message),console.log(t)}))}catch(e){m.Am.error(e),console.error(e)}},children:t=>{let{errors:n,handleBlur:r,handleChange:o,handleSubmit:i,isSubmitting:c,touched:u,values:p}=t;return(0,g.jsxs)("form",{noValidate:!0,onSubmit:i,...e,children:[(0,g.jsxs)(w.Z,{fullWidth:!0,error:Boolean(u.phone&&n.phone),sx:{...a.typography.customInput},children:[(0,g.jsx)(x.Z,{htmlFor:"outlined-adornment-email-login",children:"Phone Number"}),(0,g.jsx)(j.Z,{id:"outlined-adornment-email-login",type:"number",value:p.phone,name:"phone",onBlur:r,onChange:o,label:"Phone Number ",inputProps:{}}),u.phone&&n.phone&&(0,g.jsx)(k.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.phone})]}),(0,g.jsxs)(w.Z,{fullWidth:!0,error:Boolean(u.password&&n.password),sx:{...a.typography.customInput},children:[(0,g.jsx)(x.Z,{htmlFor:"outlined-adornment-password-login",children:"Password"}),(0,g.jsx)(j.Z,{id:"outlined-adornment-password-login",type:s?"text":"password",value:p.password,name:"password",onBlur:r,onChange:o,endAdornment:(0,g.jsx)(v.Z,{position:"end",children:(0,g.jsx)(Z.Z,{"aria-label":"toggle password visibility",onClick:l,onMouseDown:d,edge:"end",size:"large",children:s?(0,g.jsx)(E.Z,{}):(0,g.jsx)(I.Z,{})})}),label:"Password",inputProps:{}}),u.password&&n.password&&(0,g.jsx)(k.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:n.password})]}),n.submit&&(0,g.jsx)(f.Z,{sx:{mt:3},children:(0,g.jsx)(k.Z,{error:!0,children:n.submit})}),(0,g.jsx)(f.Z,{sx:{mt:2},children:(0,g.jsx)(D,{children:(0,g.jsx)(b.Z,{disableElevation:!0,disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})}})})},C=e(9062),$=e(1322);var H=()=>{const t=(0,i.Z)(),n=(0,c.Z)(t.breakpoints.down("md")),e=(0,r.s0)();return(0,o.useEffect)((()=>{let t=JSON.parse(localStorage.getItem("user"));const n=localStorage.getItem("role");console.log(t),t&&n&&e("/dashboard")}),[]),(0,g.jsx)(p,{children:(0,g.jsx)(s.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(s.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,g.jsx)(s.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,g.jsx)(y,{children:(0,g.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,g.jsx)(s.ZP,{item:!0,sx:{mb:3},children:(0,g.jsx)(a.rU,{to:"#",children:(0,g.jsx)(C.Z,{})})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(s.ZP,{container:!0,direction:n?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,g.jsx)(s.ZP,{item:!0,children:(0,g.jsxs)(u.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,g.jsx)(l.Z,{color:t.palette.secondary.main,gutterBottom:!0,variant:n?"h3":"h2",children:"Hi, Welcome Back"}),(0,g.jsx)(l.Z,{variant:"caption",fontSize:"16px",textAlign:n?"center":"inherit",children:"Enter your credentials to continue"})]})})})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(T,{adminLogin:$.$g})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(d.Z,{})}),(0,g.jsx)(s.ZP,{item:!0,xs:12})]})})})})})})})}}}]);