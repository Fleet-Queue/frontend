"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[343],{8999:function(e,t,n){n.d(t,{Z:function(){return m}});var c=n(7313),r=n(3497),a=n(1629),o=n(6835),s=n(3477),l=n(4076),i=n(7478),d=n(3467),u=n(1095),h=n(9848),f=n(6167),x=n(5842),p=n(6417);function m(e){let{data:t,header:n,isShowSerialNo:m=!1,isShowAction:j=!1,actions:Z=["Edit","Delete"],onActionChange:k,onClickAction:y,refreshData:g}=e;const[T,A]=(0,c.useState)(null),[C,b]=(0,c.useState)(null),[v,S]=(0,c.useState)(null),[_,N]=(0,c.useState)(null),[w,Y]=(0,c.useState)(!1);return(0,p.jsxs)(r.Z,{children:[(0,p.jsx)(a.Z,{children:(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(s.Z,{children:(0,p.jsxs)(l.Z,{children:[m&&(0,p.jsx)(i.Z,{sx:{color:"primary.main"},children:"SLNO"}),n.map(((e,t)=>(0,p.jsx)(i.Z,{sx:{color:"primary.main"},children:e},t))),j&&(0,p.jsx)(i.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,p.jsx)(d.Z,{children:t.map(((e,t)=>(0,p.jsxs)(l.Z,{onClick:()=>(e=>{y&&y(e)})(e._id),children:[m&&(0,p.jsx)(i.Z,{children:t+1}),n.map(((t,n)=>{if("IMAGE"===t.toUpperCase())return(0,p.jsx)(i.Z,{children:(0,p.jsx)("img",{style:{height:"100px"},src:`${e[`${t}`]}`,alt:"img"})},n);if("allocated"!=e.status&&"ALLOCATION"===t.toUpperCase())return console.log("dfffffffffffffffffffffffffffffffffffff"),console.log(e),(0,p.jsx)(i.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>(e=>{console.log("select alloccccccccccccccccccccccc"),console.log(e),console.log("heeeeeeeeeeeeeeeeeeeeeeedataaaaaaaaaaaaaaaa"),A(e.truckType),b(e.date),N(e.doId),console.log(e.truckType),Y(!0)})({doId:e._id,truckType:e.truckType,date:e["available from"]}),children:"Allocate"})},n);if("allocated"==e.status&&"ALLOCATION"===t.toUpperCase())return(0,p.jsx)(i.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>{return t=e._id,S(t),void Y(!0);var t},children:"View Allocation"})},n);if("VIEW DO"===t.toUpperCase()){const t=e["view DO"]||e.deliveryOrderId&&e.deliveryOrderId.doLink;return t?(0,p.jsx)(i.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>window.open(t,"_blank"),children:"View File"})},n):(0,p.jsx)(i.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",disabled:!0,children:"No File"})},n)}return"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===t.toUpperCase()?(0,p.jsx)(i.Z,{children:e[`${t}`]?"Yes":"No"},n):"STATUS"===t.toUpperCase()?(0,p.jsx)(i.Z,{children:e[`${t}`]?"Active":"Inactive"},n):(0,p.jsx)(i.Z,{children:e[`${t}`]},n)})),j&&(0,p.jsx)(i.Z,{children:(0,p.jsx)(h.Z,{data:e,onActionChange:e=>{k(e)},actions:Z})})]},t)))})]})}),T&&(0,p.jsx)(f.Z,{open:w,close:()=>{A(null),console.log("heeeeeeeeeeeeeeeeeeeeeeeey"),g(),Y(!1)},doId:_,date:C,type:T}),v&&(0,p.jsx)(x.Z,{open:w,close:()=>{S(null),g(),Y(!1)},doId:v})]})}},4343:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var c=n(7313),r=n(9536),a=n(9019),o=n(1550),s=n(3306),l=n(8797),i=n(1405),d=n(1113),u=n(4605),h=n(3208),f=n(5904),x=n(658),p=n.n(x),m=n(8999),j=n(1322),Z=n(8737),k=n(1095),y=n(5660),g=n(6417);const T=["Sl No","Truck Name","Registration Number","Company","Contact","Type","Category","Queue Added on"];function A(){const[e,t]=(0,c.useState)(20),[n,x]=(0,c.useState)(p()()),[A,C]=(0,c.useState)([]);(0,c.useEffect)((()=>{(()=>{const t={type:e,date:n.format("DD/MM/YYYY")};(0,j.BU)(t).then((e=>{console.log(e),C(e)})).catch((e=>{console.error(e)}))})()}),[e,n]);const b=A.map(((e,t)=>(console.log("Mapping item:",e),{"Sl No":t+1,"Truck Name":e.truck.name,"Registration Number":e.truck.registrationNumber,Company:e.truck.companyId.name,Contact:e.truck.companyId.contactNumber,Type:`${e.truck.truckType} FT`,Category:e.truck.category,"Queue Added on":p()(e.createdAt).format("DD/MM/YYYY hh:mm:ss A")})));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.Z,{sx:{mb:2},children:(0,g.jsx)(a.ZP,{container:!0,spacing:2,children:(0,g.jsx)(a.ZP,{item:!0,xs:12,children:(0,g.jsx)(k.Z,{variant:"contained",startIcon:(0,g.jsx)(y.Z,{}),onClick:()=>{const t=A.map(((e,t)=>({"Sl No":t+1,"Registration Number":e.truck.registrationNumber,Type:`${e.truck.truckType} FT`,"Queue Added Date":p()(e.createdAt).format("DD/MM/YYYY HH:mm A")}))),c=Z.P6.book_new(),r=Z.P6.json_to_sheet(t);Z.P6.book_append_sheet(c,r,`${e}FT Trucks`);const a=(0,Z.cW)(c,{bookType:"xlsx",type:"array"}),o=n.format("DD-MM-YYYY"),s=`Truck_Queue_${e}FT_${o}.xlsx`,l=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(l),d=document.createElement("a");d.href=i,d.download=s,d.click(),window.URL.revokeObjectURL(i)},sx:{float:"right",mb:2},children:"Export to Excel"})})})}),(0,g.jsx)(r.Z,{sx:{mb:2},children:(0,g.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,g.jsxs)(o.Z,{fullWidth:!0,size:"small",children:[(0,g.jsx)(s.Z,{children:"Truck Type"}),(0,g.jsxs)(l.Z,{value:e,label:"Truck Type",onChange:e=>t(e.target.value),children:[(0,g.jsx)(i.Z,{value:20,children:"20 FT"}),(0,g.jsx)(i.Z,{value:40,children:"40 FT"})]})]})}),(0,g.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,g.jsx)(h._,{dateAdapter:f.y,children:(0,g.jsx)(u.M,{label:"Select Date",value:n,onChange:e=>x(e),disabled:!0,slotProps:{textField:{size:"small",fullWidth:!0}}})})})]})}),0===A.length?(0,g.jsx)(r.Z,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,g.jsx)(d.Z,{children:"No Trucks in Queue for selected criteria"})}):(0,g.jsx)(m.Z,{data:b,header:T,isShowSerialNo:!1,isShowAction:!1})]})}}}]);