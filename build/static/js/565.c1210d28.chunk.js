"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[565],{1322:function(n,t,e){e.d(t,{$K:function(){return d},$g:function(){return S},Au:function(){return l},CE:function(){return x},Dx:function(){return E},ES:function(){return N},Et:function(){return I},GB:function(){return f},Gu:function(){return s},IB:function(){return O},Jq:function(){return F},Jr:function(){return k},K3:function(){return p},KI:function(){return J},M$:function(){return C},Mg:function(){return K},Pe:function(){return g},Q1:function(){return m},RY:function(){return P},S1:function(){return _},T5:function(){return w},T7:function(){return b},Tj:function(){return W},VW:function(){return v},Wo:function(){return z},X2:function(){return L},X6:function(){return j},Xy:function(){return A},a2:function(){return y},aZ:function(){return u},cW:function(){return D},jK:function(){return B},ji:function(){return i},kR:function(){return T},kl:function(){return h},lQ:function(){return o},oR:function(){return a},r7:function(){return c},ss:function(){return $},ut:function(){return Z},xF:function(){return H},zE:function(){return R}});const r=e(5662).Z.create({baseURL:"https://apis.fleetq.live/api/",headers:{"Content-Type":"application/json"}});async function o(n){return(await r.post("company",n)).data}async function a(n){return(await r.delete("company/"+n,n)).data}async function i(n,t){return(await r.patch("company/"+n,t)).data}async function c(n){return(await r.post("company/getAllCompany",n)).data}async function s(n){return(await r.post("truck",n)).data}async function u(n){return(await r.post("truck/getAllTruck",n)).data}async function l(n){return(await r.post("truck/updateTruckStatus",n)).data}async function d(n){return(await r.delete("truck/"+n,n)).data}async function p(n,t){return(await r.patch("truck/"+n,t)).data}async function f(n){return(await r.post("truck/updateTruckBookingStatus",n)).data}async function h(n){return(await r.post("truck/getAllTruckBookings",n)).data}async function g(n){return(await r.post("truck/addTruckToBooking",n)).data}async function y(n){return(await r.post("party/getAllParty",n)).data}async function m(n){return(await r.post("party",n)).data}async function w(n){return(await r.delete(`party/${n}`)).data}async function x(n,t){return(await r.post(`party/${n}`,t)).data}async function j(n){return(await r.put(`party/updateStatus/${n}`)).data}async function k(n){return(await r.post("truck/getAllTruckBookings",{status:n.status})).data}async function v(n){return(await r.post("truck/getInQueueTrucks",n)).data}async function Z(n){return(await r.post("allocation/getAllocationDetails",n)).data}async function b(n){return(await r.post("allocation",n)).data}async function B(n){return(await r.post("allocation/changeAllocationStatus",n)).data}async function S(n){const t=await r.post("user/login",n);return console.log(t),t.data}async function P(n){return(await r.post("location/getAllLocation",n)).data}async function E(n){return(await r.post("location",n)).data}async function A(n){return(await r.post("doBooking/getAllDO",n)).data}async function D(n){return(await r.post("doBooking",n)).data}async function T(n){return(await r.post("doBooking/uploadDO",n)).data}async function C(n,t){try{return(await r.put(`doBooking/updateDO/${n}`,t)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function I(n,t){try{return(await r.post(`doBooking/cancelDO/${n}`,t)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function $(n,t){try{return(await r.post(`doBooking/cancelDOBooking/${n}`,t)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function H(n){try{return(await r.post(`doBooking/reopen-do-booking/${n}`)).data}catch(t){throw console.error("Error cancelling Do booking:",t),t}}async function O(n,t){try{return(await r.post(`allocation/cancel-allocated-booking/${n}`,t)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function W(n){try{return(await r.post(`allocation/re-allocate-booking/${n}`)).data}catch(t){throw console.error("Error cancelling Do booking:",t),t}}async function _(n){return(await r.post("doBooking/getAllDeliveryOrders",n)).data}async function z(n){return(await r.delete("doBooking",n)).data}async function J(n){return(await r.delete("doBooking/deleteDeliveryOrder/"+n)).data}async function L(n){return(await r.post("driver",n)).data}async function R(n){return(await r.post("driver/getAllDrivers",n)).data}async function F(n){return(await r.post("driver/getCompanyDrivers",n)).data}async function K(n){return(await r.delete("driver/"+n,n)).data}async function N(n,t){return(await r.patch("driver/"+n,t)).data}r.interceptors.request.use((async n=>{const t=localStorage.getItem("token");return t?n.headers.Authorization="Bearer "+t:console.warn("Token not found in localStorage"),n}),(n=>Promise.reject(n))),r.interceptors.response.use((n=>n),(n=>(n.response&&401===n.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),window.location.href="/login"),Promise.reject(n))))},3565:function(n,t,e){e.r(t),e.d(t,{default:function(){return H}});var r=e(7890),o=e(9466),a=e(7313),i=e(9860),c=e(5300),s=e(9019),u=e(2832),l=e(1113),d=e(2247);var p=(0,e(7592).ZP)("div")((n=>{let{theme:t}=n;return{backgroundColor:t.palette.primary.light,minHeight:"100vh"}})),f=e(9536),h=e(3497),g=e(6417);var y=n=>{let{children:t,...e}=n;return(0,g.jsx)(h.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...e,children:(0,g.jsx)(f.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:t})})},m=e(1387),w=e(1550),x=e(3306),j=e(7843),k=e(5480),v=e(1727),Z=e(7131),b=e(1095),B=e(9429),S=e(551),P=e(1730);const E=(0,a.forwardRef)(((n,t)=>{var e,r;let o,a,{children:i,type:c,direction:s,offset:u,scale:l}=n;switch(s){case"up":case"left":o=u,a=0;break;default:o=0,a=u}const[d,p]=(0,S.n)(o,a),[f,h]=(0,S.n)(o,a);switch(c){case"rotate":return(0,g.jsx)(P.E.div,{ref:t,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:i});case"slide":return"up"===s||"down"===s?(0,g.jsx)(P.E.div,{ref:t,animate:{y:void 0!==f?f:""},onHoverEnd:()=>h(),onHoverStart:()=>h(),children:i}):(0,g.jsx)(P.E.div,{ref:t,animate:{x:void 0!==d?d:""},onHoverEnd:()=>p(),onHoverStart:()=>p(),children:i});default:return"number"===typeof l&&(l={hover:l,tap:l}),(0,g.jsx)(P.E.div,{ref:t,whileHover:{scale:null===(e=l)||void 0===e?void 0:e.hover},whileTap:{scale:null===(r=l)||void 0===r?void 0:r.tap},children:i})}}));E.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}};var A=E,D=e(237),T=e(2611);var C=n=>{let{adminLogin:t,...e}=n;const o=(0,i.Z)(),c=(0,r.s0)(),[s,u]=(0,a.useState)(!1),l=()=>{u(!s)},d=n=>{n.preventDefault()};return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(B.J9,{initialValues:{phone:"",password:"",submit:null},onSubmit:async n=>{try{t({phone:n.phone,password:n.password}).then((n=>{console.log(n);let t="admin";n.user.companyId&&(t=n.user.companyId.companyType),localStorage.setItem("role",t),localStorage.setItem("token",n.accessToken),localStorage.setItem("user",JSON.stringify(n.user)),m.Am.success("Login Success"),c("admin"==t?"/doUpload":"/dashboard")})).catch((n=>{console.log(n),m.Am.error(n.response.data.message),console.log(n)}))}catch(e){m.Am.error(e),console.error(e)}},children:n=>{let{errors:t,handleBlur:r,handleChange:a,handleSubmit:i,isSubmitting:c,touched:u,values:p}=n;return(0,g.jsxs)("form",{noValidate:!0,onSubmit:i,...e,children:[(0,g.jsxs)(w.Z,{fullWidth:!0,error:Boolean(u.phone&&t.phone),sx:{...o.typography.customInput},children:[(0,g.jsx)(x.Z,{htmlFor:"outlined-adornment-email-login",children:"Phone Number"}),(0,g.jsx)(j.Z,{id:"outlined-adornment-email-login",type:"number",value:p.phone,name:"phone",onBlur:r,onChange:a,label:"Phone Number ",inputProps:{}}),u.phone&&t.phone&&(0,g.jsx)(k.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:t.phone})]}),(0,g.jsxs)(w.Z,{fullWidth:!0,error:Boolean(u.password&&t.password),sx:{...o.typography.customInput},children:[(0,g.jsx)(x.Z,{htmlFor:"outlined-adornment-password-login",children:"Password"}),(0,g.jsx)(j.Z,{id:"outlined-adornment-password-login",type:s?"text":"password",value:p.password,name:"password",onBlur:r,onChange:a,endAdornment:(0,g.jsx)(v.Z,{position:"end",children:(0,g.jsx)(Z.Z,{"aria-label":"toggle password visibility",onClick:l,onMouseDown:d,edge:"end",size:"large",children:s?(0,g.jsx)(D.Z,{}):(0,g.jsx)(T.Z,{})})}),label:"Password",inputProps:{}}),u.password&&t.password&&(0,g.jsx)(k.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:t.password})]}),t.submit&&(0,g.jsx)(f.Z,{sx:{mt:3},children:(0,g.jsx)(k.Z,{error:!0,children:t.submit})}),(0,g.jsx)(f.Z,{sx:{mt:2},children:(0,g.jsx)(A,{children:(0,g.jsx)(b.Z,{disableElevation:!0,disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})}})})},I=e(9062),$=e(1322);var H=()=>{const n=(0,i.Z)(),t=(0,c.Z)(n.breakpoints.down("md")),e=(0,r.s0)();return(0,a.useEffect)((()=>{let n=JSON.parse(localStorage.getItem("user"));console.log(n),n&&e("/dashboard")}),[]),(0,g.jsx)(p,{children:(0,g.jsx)(s.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(s.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,g.jsx)(s.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,g.jsx)(y,{children:(0,g.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,g.jsx)(s.ZP,{item:!0,sx:{mb:3},children:(0,g.jsx)(o.rU,{to:"#",children:(0,g.jsx)(I.Z,{})})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(s.ZP,{container:!0,direction:t?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,g.jsx)(s.ZP,{item:!0,children:(0,g.jsxs)(u.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,g.jsx)(l.Z,{color:n.palette.secondary.main,gutterBottom:!0,variant:t?"h3":"h2",children:"Hi, Welcome Back"}),(0,g.jsx)(l.Z,{variant:"caption",fontSize:"16px",textAlign:t?"center":"inherit",children:"Enter your credentials to continue"})]})})})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(C,{adminLogin:$.$g})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,children:(0,g.jsx)(d.Z,{})}),(0,g.jsx)(s.ZP,{item:!0,xs:12})]})})})})})})})}}}]);