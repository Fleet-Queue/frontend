"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[323],{8999:function(n,o,t){t.d(o,{Z:function(){return f}});var e=t(7313),r=t(3497),a=t(1629),c=t(6835),s=t(3477),i=t(4076),l=t(7478),d=t(3467),u=t(1095),p=t(9848),g=t(6167),x=t(5842),h=t(6417);function f(n){let{data:o,header:t,isShowSerialNo:f=!1,isShowAction:k=!1,actions:y=["Edit","Delete"],onActionChange:m,onClickAction:j,refreshData:Z}=n;const[C,w]=(0,e.useState)(null),[v,I]=(0,e.useState)(null),[A,b]=(0,e.useState)(null),[T,B]=(0,e.useState)(null),[S,D]=(0,e.useState)(!1);return(0,h.jsxs)(r.Z,{children:[(0,h.jsx)(a.Z,{children:(0,h.jsxs)(c.Z,{children:[(0,h.jsx)(s.Z,{children:(0,h.jsxs)(i.Z,{children:[f&&(0,h.jsx)(l.Z,{sx:{color:"primary.main"},children:"SLNO"}),t.map(((n,o)=>(0,h.jsx)(l.Z,{sx:{color:"primary.main"},children:n},o))),k&&(0,h.jsx)(l.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,h.jsx)(d.Z,{children:o.map(((n,o)=>(0,h.jsxs)(i.Z,{onClick:()=>(n=>{j&&j(n)})(n._id),children:[f&&(0,h.jsx)(l.Z,{children:o+1}),t.map(((o,t)=>{if("IMAGE"===o.toUpperCase())return(0,h.jsx)(l.Z,{children:(0,h.jsx)("img",{style:{height:"100px"},src:`${n[`${o}`]}`,alt:"img"})},t);if("allocated"!=n.status&&"ALLOCATION"===o.toUpperCase())return(0,h.jsx)(l.Z,{children:(0,h.jsx)(u.Z,{variant:"contained",onClick:()=>(n=>{w(n.truckType),I(n.date),B(n.doId),console.log(n.truckType),D(!0)})({doId:n._id,truckType:n.truckType,date:n.availableFrom}),children:"Allocate"})},t);if("allocated"==n.status&&"ALLOCATION"===o.toUpperCase())return(0,h.jsx)(l.Z,{children:(0,h.jsx)(u.Z,{variant:"contained",onClick:()=>{return o=n._id,b(o),void D(!0);var o},children:"View Allocation"})},t);if("VIEW DO"===o.toUpperCase()){const o=n["View DO"]||n.deliveryOrderId&&n.deliveryOrderId.doLink;return o?(0,h.jsx)(l.Z,{children:(0,h.jsx)(u.Z,{variant:"contained",onClick:()=>window.open(o,"_blank"),children:"View File"})},t):(0,h.jsx)(l.Z,{children:(0,h.jsx)(u.Z,{variant:"contained",disabled:!0,children:"No File"})},t)}return"isHighRangeArea"!=n.status&&"ISHIGHRANGEAREA"===o.toUpperCase()?(0,h.jsx)(l.Z,{children:n[`${o}`]?"Yes":"No"},t):(0,h.jsx)(l.Z,{children:n[`${o}`]},t)})),k&&(0,h.jsx)(l.Z,{children:(0,h.jsx)(p.Z,{data:n,onActionChange:n=>{m(n)},actions:y})})]},o)))})]})}),C&&(0,h.jsx)(g.Z,{open:S,close:()=>{w(null),Z(),D(!1)},doId:T,date:v,type:C}),A&&(0,h.jsx)(x.Z,{open:S,close:()=>{b(null),Z(),D(!1)},doId:A})]})}},9848:function(n,o,t){t.d(o,{Z:function(){return y}});var e=t(7313),r=t(7592),a=t(7551),c=t(9601),s=t(1405),i=t(5954),l=t(8210),d=t(8790),u=t(4481),p=t(9916),g=t(712),x=t(7474),h=t(7131),f=t(6417);const k=(0,r.ZP)((n=>(0,f.jsx)(c.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...n})))((n=>{let{theme:o}=n;return{"& .MuiPaper-root":{borderRadius:6,marginTop:o.spacing(1),minWidth:130,color:"light"===o.palette.mode?"rgb(55, 65, 81)":o.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:o.palette.text.secondary,marginRight:o.spacing(1.5)},"&:active":{backgroundColor:(0,a.Fq)(o.palette.primary.main,o.palette.action.selectedOpacity)}}}}}));function y(n){let{data:o,actions:t=["Edit","Delete"],onActionChange:r}=n;const[a,c]=e.useState(null),y=Boolean(a),m=n=>{c(null),r&&r({action:n,data:o})};return(0,f.jsxs)("div",{children:[(0,f.jsx)(h.Z,{variant:"contained",onClick:n=>{c(n.currentTarget)},children:(0,f.jsx)(l.Z,{})}),(0,f.jsx)(k,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:a,open:y,onClose:m,children:t.map(((n,o)=>"ADD TO QUEUE"==n.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>m(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(d.Z,{style:{color:"green"}}),"Add To Queue"]},o):"ADDBOOKING"==n.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>m(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,f.jsx)(d.Z,{style:{color:"green"}}),"Add TO BOOKING"]},o):"EDIT"==n.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>m(n),children:[(0,f.jsx)(i.Z,{}),"Edit"]},o):"DELETE"==n.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>m(n),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,f.jsx)(u.Z,{style:{color:"red"}}),"Delete"]},o):"VIEW"==n.toUpperCase()?(0,f.jsxs)(s.Z,{onClick:()=>m(n),children:[(0,f.jsx)(p.Z,{}),"View"]},o):"CANCEL"==n.toUpperCase()?(0,f.jsxs)(s.Z,{sx:{color:"red"},onClick:()=>m(n),children:[(0,f.jsx)(g.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},o):(0,f.jsxs)(s.Z,{onClick:()=>m(n),children:[(0,f.jsx)(x.Z,{}),n]},o)))})]})}},5842:function(n,o,t){var e=t(7313),r=t(1095),a=t(4469),c=t(3213),s=t(9840),i=t(8310),l=t(2247),d=t(5908),u=t(9289),p=t(7131),g=t(1113),x=t(1198),h=t(301),f=t(1322),k=t(1387),y=t(6417);const m=e.forwardRef((function(n,o){return(0,y.jsx)(h.Z,{direction:"up",ref:o,...n})}));o.Z=n=>{const[o,t]=e.useState(n.open);const[h,j]=e.useState({}),Z=()=>{t(!1),n.close()},C=n=>new Date(n).toLocaleString(),w=n=>{(0,f.ut)(n).then((n=>{j(n),console.log(n)})).catch((n=>{console.log(n),k.Am.error(n.response.data.message)}))},v=(o,t)=>{(0,f.jK)({status:t,allocId:o}).then((o=>{console.log(o),k.Am.success("status updated successfully"),w({doBookingId:n.doId})})).catch((n=>{console.log(n),k.Am.error(n.response.data.message)}))};return(0,e.useEffect)((()=>{n.doId&&w({doBookingId:n.doId})}),[]),(0,y.jsx)(e.Fragment,{children:(0,y.jsxs)(a.Z,{fullWidth:!0,maxWidth:"md",open:o,onClose:Z,TransitionComponent:m,children:[(0,y.jsx)(d.Z,{sx:{position:"relative"},children:(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(p.Z,{edge:"start",color:"inherit",onClick:Z,"aria-label":"close",children:(0,y.jsx)(x.Z,{})}),(0,y.jsx)(g.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Allocated Details"}),(0,y.jsx)(r.Z,{autoFocus:!0,color:"inherit",onClick:Z,children:"Close"})]})}),(0,y.jsx)(i.Z,{children:h&&h.truckBookingId&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(c.Z,{primary:h.truckBookingId.truck.name,secondary:h.truckBookingId.truck.registrationNumber}),(0,y.jsx)(c.Z,{primary:h.truckBookingId.truck.category,secondary:h.truckBookingId.truck.truckType+" FT"}),(0,y.jsx)(c.Z,{primary:"allocated on:",secondary:C(h.allocatedOn)}),(0,y.jsx)(c.Z,{primary:h.truckBookingId.truck.companyId.name,secondary:h.truckBookingId.truck.companyId.contactNumber})]},1),(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(c.Z,{primary:h.truckBookingId.truck.companyId.ownerName,secondary:h.truckBookingId.truck.companyId.address}),(0,y.jsx)(c.Z,{primary:"driver: "+h.truckBookingId.truck.driverId.name,secondary:h.truckBookingId.truck.driverId.contactNumber}),(0,y.jsx)(c.Z,{primary:"Date on:",secondary:C(h.truckBookingId.availableFrom)}),(0,y.jsx)(c.Z,{primary:"Status:",secondary:h.status}),"allocated"===h.status?(0,y.jsx)(r.Z,{variant:"contained",onClick:()=>v(h._id,"ongoing"),children:"Move to Live"}):"ongoing"===h.status?(0,y.jsx)(r.Z,{variant:"contained",onClick:()=>v(h._id,"done"),children:"Move to Done"}):"expired"===h.status?(0,y.jsx)(r.Z,{variant:"contained",disabled:!0,children:"Expired"}):null]},2),(0,y.jsx)(l.Z,{})]})})]})})}},6167:function(n,o,t){var e=t(7313),r=t(1095),a=t(4469),c=t(3213),s=t(9840),i=t(8310),l=t(2247),d=t(5908),u=t(9289),p=t(7131),g=t(1113),x=t(1198),h=t(301),f=t(1387),k=t(1322),y=t(6417);const m=e.forwardRef((function(n,o){return(0,y.jsx)(h.Z,{direction:"up",ref:o,...n})}));o.Z=n=>{const[o,t]=e.useState(n.open);const[h,j]=e.useState([]),Z=()=>{t(!1),n.close()};return(0,e.useEffect)((()=>{n.type&&(n=>{console.log(n),(0,k.VW)(n).then((n=>{j(n),console.log(n)})).catch((n=>{console.log(n)}))})({status:"inqueue",type:n.type,date:n.date})}),[]),(0,y.jsx)(e.Fragment,{children:(0,y.jsxs)(a.Z,{fullWidth:!0,maxWidth:"md",open:o,onClose:Z,TransitionComponent:m,children:[(0,y.jsx)(d.Z,{sx:{position:"relative"},children:(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(p.Z,{edge:"start",color:"inherit",onClick:Z,"aria-label":"close",children:(0,y.jsx)(x.Z,{})}),(0,y.jsx)(g.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Truck Allocation"}),(0,y.jsx)(r.Z,{autoFocus:!0,color:"inherit",onClick:Z,children:"Close"})]})}),(0,y.jsx)(i.Z,{children:h.map((o=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(c.Z,{primary:o.truck.name,secondary:o.truck.registrationNumber}),(0,y.jsx)(c.Z,{primary:o.truck.companyId.name,secondary:o.truck.companyId.contactNumber}),(0,y.jsx)(c.Z,{primary:o.truck.category,secondary:o.truck.truckType+" FT"}),(0,y.jsx)(r.Z,{variant:"contained",onClick:()=>(o=>{if(console.log(o),!n.date||!n.doId)return console.log(err),!1;(0,k.T7)({doBookingId:n.doId,doDate:n.date,truckBookingId:o}).then((n=>{console.log(n),f.Am.success("DO allocation successfull!"),Z()})).catch((n=>{f.Am.error(n.response.data.message),console.log(n)}))})(o._id),children:"Allocate"})]},o._id),(0,y.jsx)(l.Z,{})]})))})]})})}},1322:function(n,o,t){t.d(o,{$K:function(){return p},$g:function(){return w},Au:function(){return u},Dx:function(){return I},ES:function(){return U},GB:function(){return g},Gu:function(){return l},Jq:function(){return N},Jr:function(){return y},KI:function(){return D},Mg:function(){return _},Pe:function(){return h},Q1:function(){return k},RY:function(){return v},S1:function(){return B},T7:function(){return Z},VW:function(){return m},Wo:function(){return S},X2:function(){return O},Xy:function(){return A},a2:function(){return f},aZ:function(){return d},cW:function(){return b},jK:function(){return C},ji:function(){return s},kR:function(){return T},kl:function(){return x},lQ:function(){return a},oR:function(){return c},r7:function(){return i},ut:function(){return j},zE:function(){return E}});var e=t(5662);console.log(window.location.hostname);const r=e.Z.create({baseURL:"https://apis.fleetq.live/api/",headers:{"Content-Type":"application/json"}});async function a(n){const o=await r.post("company",n);return console.log(o.data),o.data}async function c(n){console.log(n);const o=await r.delete("company/"+n,n);return console.log(o.data),o.data}async function s(n,o){console.log(o);const t=await r.patch("company/"+n,o);return console.log(t.data),t.data}async function i(n){const o=await r.post("company/getAllCompany",n);return console.log(o.data),o.data}async function l(n){const o=await r.post("truck",n);return console.log(o.data),o.data}async function d(n){const o=await r.post("truck/getAllTruck",n);return console.log(o.data),o.data}async function u(n){const o=await r.post("truck/updateTruckStatus",n);return console.log(o.data),o.data}async function p(n){console.log(n);const o=await r.delete("truck/"+n,n);return console.log(o.data),o.data}async function g(n){const o=await r.post("truck/updateTruckBookingStatus",n);return console.log(o.data),o.data}async function x(n){const o=await r.post("truck/getAllTruckBookings",n);return console.log(o.data),o.data}async function h(n){const o=await r.post("truck/addTruckToBooking",n);return console.log(o.data),o.data}async function f(n){const o=await r.post("party/getAllParty",n);return console.log(o.data),o.data}async function k(n){const o=await r.post("party",n);return console.log(o.data),o.data}async function y(n){return(await r.post("truck/getAllTruckBookings",{status:n.status})).data}async function m(n){return(await r.post("truck/getInQueueTrucks",n)).data}async function j(n){const o=await r.post("allocation/getAllocationDetails",n);return console.log(o.data),o.data}async function Z(n){const o=await r.post("allocation",n);return console.log(o.data),o.data}async function C(n){const o=await r.post("allocation/changeAllocationStatus",n);return console.log(o.data),o.data}async function w(n){const o=await r.post("user/login",n);return console.log("heeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"),console.log(o),console.log(o.data),o.data}async function v(n){const o=await r.post("location/getAllLocation",n);return console.log(o.data),o.data}async function I(n){const o=await r.post("location",n);return console.log(o.data),o.data}async function A(n){const o=await r.post("doBooking/getAllDO",n);return console.log(o.data),o.data}async function b(n){const o=await r.post("doBooking",n);return console.log(o.data),o.data}async function T(n){const o=await r.post("doBooking/uploadDO",n);return console.log(o.data),o.data}async function B(n){const o=await r.post("doBooking/getAllDeliveryOrders",n);return console.log(o.data),o.data}async function S(n){const o=await r.delete("doBooking",n);return console.log(o.data),o.data}async function D(n){const o=await r.delete("doBooking/deleteDeliveryOrder/"+n);return console.log(o.data),o.data}async function O(n){const o=await r.post("driver",n);return console.log(o.data),o.data}async function E(n){const o=await r.post("driver/getAllDrivers",n);return console.log(o.data),o.data}async function N(n){const o=await r.post("driver/getCompanyDrivers",n);return console.log(o.data),o.data}async function _(n){console.log(n);const o=await r.delete("driver/"+n,n);return console.log(o.data),o.data}async function U(n,o){console.log(o);const t=await r.patch("driver/"+n,o);return console.log(t.data),t.data}r.interceptors.request.use((async n=>{const o=localStorage.getItem("token");return o?n.headers.Authorization="Bearer "+o:console.warn("Token not found in localStorage"),n}),(n=>Promise.reject(n))),r.interceptors.response.use((n=>n),(n=>(n.response&&401===n.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),window.location.href="/login"),Promise.reject(n))))},5266:function(n,o,t){t.d(o,{h:function(){return a}});var e=t(6031),r=t.n(e);const a=(n,o,t)=>n.map((n=>r().mapKeys(n,((n,e)=>{for(let r=0;r<t.length;r++)if(e===o[r])return t[r];return e}))))}}]);