"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[929],{2186:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(3365),a=r(4469),s=r(3604),c=r(2832),o=r(1113),i=r(7313),l=r(1766),d=r(6417);const m=i.forwardRef((function(e,n){return(0,d.jsx)(t.Z,{ref:n,...e})}));function u(e){let{title:n,children:r,open:t,onClose:i,...u}=e;return(0,d.jsxs)(a.Z,{...u,open:t,TransitionComponent:m,children:[(0,d.jsx)(s.Z,{children:(0,d.jsxs)(c.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(o.Z,{variant:"h2",color:"primary.main",children:n}),(0,d.jsx)(l.Z,{sx:{cursor:"pointer"},onClick:i})]})}),r]})}},929:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t=r(7313),a=r(8999),s=r(5266),c=r(1387),o=r(1322),i=r(7825),l=r(2832),d=r(1113),m=r(4631),u=r(1550),p=r(3306),h=r(4256),x=r(1405),b=r(5480),g=r(1095),j=r(5627),y=r(2186),f=r(8444),Z=r(3208),v=r(5904),N=r(658),C=r.n(N),S=r(6417);function T(e){let{getData:n,open:r,onClose:a,isEdit:s=!1,data:N={}}=e;const[T,D]=(0,t.useState)([]),k=["LMV TT","MPV","MGV","LMV","MCWG","MCWOG"],{control:W,handleSubmit:w,formState:{errors:I}}=(0,j.cI)({defaultValues:s?{name:N.Name,contactNumber:N.ContactNumber,address:N.Address,licenceNumber:N.licenceNumber,licenceType:N.licenceType,expiryDate:"",companyId:""}:{name:"",contactNumber:"",address:"",licenceNumber:"",licenceType:"",expiryDate:"",companyId:""}}),[M,A]=t.useState(null),L=new Date,E=new Date(L),_=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}-${String(E.getDate()).padStart(2,"0")}`;return(0,t.useEffect)((()=>{console.log("heeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"),console.log(N),(0,o.r7)({companyTypes:["transporter","both"]}).then((e=>{console.log(e),D(e)})).catch((e=>{console.log(e),c.Am.error(e.message)}))}),[]),(0,S.jsx)(t.Fragment,{children:(0,S.jsx)(Z._,{dateAdapter:v.y,children:(0,S.jsx)(y.Z,{open:r,fullWidth:!0,onClose:a,title:(s?"Edit":"Add")+" Driver",children:(0,S.jsx)("form",{onSubmit:w((e=>{console.log(e),M||(console.log("Please select a date"),c.Am.error("Please select a date"));const r=C()(M).format("YYYY-MM-DD");s?(0,o.ES)(N._id,{name:e.name,contactNumber:e.contactNumber,address:e.address,licenceNumber:e.licenceNumber,licenceType:e.licenceType,expiryDate:r,companyId:e.companyId}).then((e=>{console.log(e),n(),a()})).catch((e=>{console.error(e),c.Am.error(e.message)})):(0,o.X2)({name:e.name,contactNumber:e.contactNumber,address:e.address,licenceNumber:e.licenceNumber,licenceType:e.licenceType,expiryDate:r,companyId:e.companyId}).then((e=>{console.log(e),n(),a()})).catch((e=>{console.error(e),c.Am.error(e.message)}))})),children:(0,S.jsx)(i.Z,{children:(0,S.jsxs)(l.Z,{direction:"column",sx:{p:2},spacing:1,children:[(0,S.jsx)(d.Z,{variant:"h5",children:"Driver Name"}),(0,S.jsx)(j.Qr,{name:"name",control:W,render:e=>{let{field:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{...n,placeholder:"Enter Driver Name"}),I.name&&(0,S.jsx)("span",{style:{color:"#f00"},children:I.name.message})]})},rules:{required:"Driver Name is required"}}),(0,S.jsx)(d.Z,{variant:"h5",children:"Contact Number"}),(0,S.jsx)(j.Qr,{name:"contactNumber",control:W,render:e=>{let{field:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{...n,placeholder:"Enter Contact Number"}),I.contactNumber&&(0,S.jsx)("span",{style:{color:"#f00"},children:I.contactNumber.message})]})},rules:{required:"Contact Number is required",pattern:{value:/^[0-9]{10}$/,message:"Contact Number must be exactly 10 digits"}}}),(0,S.jsx)(d.Z,{variant:"h5",children:"Address"}),(0,S.jsx)(j.Qr,{name:"address",control:W,render:e=>{let{field:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{...n,placeholder:"Enter Address"}),I.address&&(0,S.jsx)("span",{style:{color:"#f00"},children:I.address.message})]})},rules:{required:"Address is required"}}),(0,S.jsx)(d.Z,{variant:"h5",children:"Licence Number"}),(0,S.jsx)(j.Qr,{name:"licenceNumber",control:W,render:e=>{let{field:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{...n,placeholder:"Enter Licence Number"}),I.licenceNumber&&(0,S.jsx)("span",{style:{color:"#f00"},children:I.licenceNumber.message})]})},rules:{required:"Licence Number is required"}}),(0,S.jsx)(d.Z,{variant:"h5",children:"Licence Type"}),(0,S.jsxs)(u.Z,{error:Boolean(I.licenceType),children:[(0,S.jsx)(p.Z,{id:"licenceType-select-label",children:"Licence Type"}),(0,S.jsx)(j.Qr,{name:"licenceType",control:W,render:e=>{let{field:n}=e;return(0,S.jsx)(h.Z,{...n,labelId:"licenceType-select-label",id:"licenceType-select",label:"Licence Type",value:n.value||"",onChange:e=>n.onChange(e.target.value),children:k.map((e=>(0,S.jsx)(x.Z,{value:e,children:e},e)))})},rules:{required:"Licence Type is required"}}),I.licenceType&&(0,S.jsx)(b.Z,{children:I.licenceType.message})]}),(0,S.jsx)(d.Z,{variant:"h5",children:"Expiry Date"}),(0,S.jsx)(u.Z,{sx:{mt:2,minWidth:120},children:(0,S.jsx)(f.M,{label:"From Date",value:M,onChange:e=>A(e),minDate:C()(_),renderInput:e=>(0,S.jsx)(m.Z,{...e})})}),(0,S.jsxs)(u.Z,{error:Boolean(I.companyId),children:[(0,S.jsx)(p.Z,{id:"company-select-label",children:"Company"}),(0,S.jsx)(j.Qr,{name:"companyId",control:W,render:e=>{let{field:n}=e;return(0,S.jsxs)(h.Z,{...n,labelId:"company-select-label",id:"company-select",label:"Company",value:n.value||"",onChange:e=>n.onChange(e.target.value),children:[(0,S.jsx)(x.Z,{value:"",children:(0,S.jsx)("em",{children:"None"})}),T.map((e=>(0,S.jsx)(x.Z,{value:e._id,children:e.name},e._id)))]})},rules:{required:"Company is required"}}),I.companyId&&(0,S.jsx)(b.Z,{children:I.companyId.message})]}),(0,S.jsx)(g.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:s?"Edit":"Add"})]})})})})})})}const D=["Name","ContactNumber","Address","CompanyName","licenceType","licenceNumber"];function k(e){let{data:n,updateData:r}=e;const[i,l]=(0,t.useState)(!1),[d,m]=(0,t.useState)(),u=(0,s.h)(n,["name","contactNumber","address","companyName","licenceType","licenceNumber"],D),p="admin"===localStorage.getItem("role");return(0,S.jsxs)(S.Fragment,{children:[i&&(0,S.jsx)(T,{open:i,getData:r,data:d,isEdit:!0,onClose:()=>{l(!1)}}),(0,S.jsx)(a.Z,{data:u,header:D,isShowSerialNo:!0,isShowAction:p,actions:["Edit","delete"],onActionChange:async e=>{console.log(e.action),"delete"==e.action?(console.log(e.data._id),m(e.data),(0,o.Mg)(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),c.Am.error(e.response.data.message)}))):"Edit"==e.action?(console.log(e.action),l(!0),m(e.data)):console.log(e.action)}})]})}var W=r(2040),w=r(3497);function I(e){let{buttonClick:n}=e;const r="admin"===localStorage.getItem("role");return(0,S.jsx)(w.Z,{children:(0,S.jsxs)(l.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsx)(d.Z,{variant:"h3",color:"secondary.main",children:"Manage Drivers"}),r&&(0,S.jsx)(g.Z,{variant:"contained",startIcon:(0,S.jsx)(W.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:n,children:"Add Driver"})]})})}function M(){const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)([]),s=()=>{(0,o.zE)().then((e=>{a(e)})).catch((e=>{console.log(e),c.Am.error(e.response.data.message)}))};return(0,t.useEffect)((()=>{s()}),[]),(0,S.jsxs)(l.Z,{direction:"column",gap:2,children:[(0,S.jsx)(T,{open:e,getData:s,onClose:()=>{n(!1)}}),(0,S.jsx)(I,{buttonClick:()=>n(!0)}),(0,S.jsx)(k,{data:r,updateData:s})]})}},1766:function(e,n,r){var t=r(1171),a=r(6417);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded")},7825:function(e,n,r){r.d(n,{Z:function(){return N}});var t=r(3366),a=r(7462),s=r(7313),c=r(4146),o=r(1167),i=r(8007),l=r(1179),d=r(4614),m=r(6694),u=r(1821),p=r(6417);const h=["className","component","disableGutters","fixed","maxWidth","classes"],x=(0,u.Z)(),b=(0,m.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[`maxWidth${(0,l.Z)(String(r.maxWidth))}`],r.fixed&&n.fixed,r.disableGutters&&n.disableGutters]}}),g=e=>(0,d.Z)({props:e,name:"MuiContainer",defaultTheme:x}),j=(e,n)=>{const{classes:r,fixed:t,disableGutters:a,maxWidth:s}=e,c={root:["root",s&&`maxWidth${(0,l.Z)(String(s))}`,t&&"fixed",a&&"disableGutters"]};return(0,i.Z)(c,(e=>(0,o.ZP)(n,e)),r)};var y=r(1615),f=r(7592),Z=r(7342);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=b,useThemeProps:r=g,componentName:o="MuiContainer"}=e,i=n((e=>{let{theme:n,ownerState:r}=e;return(0,a.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!r.disableGutters&&{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}})}),(e=>{let{theme:n,ownerState:r}=e;return r.fixed&&Object.keys(n.breakpoints.values).reduce(((e,r)=>{const t=r,a=n.breakpoints.values[t];return 0!==a&&(e[n.breakpoints.up(t)]={maxWidth:`${a}${n.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:n,ownerState:r}=e;return(0,a.Z)({},"xs"===r.maxWidth&&{[n.breakpoints.up("xs")]:{maxWidth:Math.max(n.breakpoints.values.xs,444)}},r.maxWidth&&"xs"!==r.maxWidth&&{[n.breakpoints.up(r.maxWidth)]:{maxWidth:`${n.breakpoints.values[r.maxWidth]}${n.breakpoints.unit}`}})})),l=s.forwardRef((function(e,n){const s=r(e),{className:l,component:d="div",disableGutters:m=!1,fixed:u=!1,maxWidth:x="lg"}=s,b=(0,t.Z)(s,h),g=(0,a.Z)({},s,{component:d,disableGutters:m,fixed:u,maxWidth:x}),y=j(g,o);return(0,p.jsx)(i,(0,a.Z)({as:d,ownerState:g,className:(0,c.Z)(y.root,l),ref:n},b))}));return l}({createStyledComponent:(0,f.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[`maxWidth${(0,y.Z)(String(r.maxWidth))}`],r.fixed&&n.fixed,r.disableGutters&&n.disableGutters]}}),useThemeProps:e=>(0,Z.Z)({props:e,name:"MuiContainer"})});var N=v}}]);