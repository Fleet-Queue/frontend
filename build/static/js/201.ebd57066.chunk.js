"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[201],{9848:function(n,t,o){o.d(t,{Z:function(){return m}});var e=o(7313),a=o(7592),r=o(7551),c=o(9601),s=o(1405),i=o(5954),l=o(8210),u=o(8790),d=o(4481),g=o(9916),p=o(712),x=o(7474),h=o(7131),k=o(6417);const f=(0,a.ZP)((n=>(0,k.jsx)(c.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...n})))((n=>{let{theme:t}=n;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:130,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function m(n){let{data:t,actions:o=["Edit","Delete"],onActionChange:a}=n;const[r,c]=e.useState(null),m=Boolean(r),y=n=>{c(null),a&&a({action:n,data:t})};return(0,k.jsxs)("div",{children:[(0,k.jsx)(h.Z,{variant:"contained",onClick:n=>{c(n.currentTarget)},children:(0,k.jsx)(l.Z,{})}),(0,k.jsx)(f,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:r,open:m,onClose:y,children:o.map(((n,t)=>"ADD TO QUEUE"==n.toUpperCase()?(0,k.jsxs)(s.Z,{onClick:()=>y(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,k.jsx)(u.Z,{style:{color:"green"}}),"Add To Queue"]},t):"ADDBOOKING"==n.toUpperCase()?(0,k.jsxs)(s.Z,{onClick:()=>y(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,k.jsx)(u.Z,{style:{color:"green"}}),"Add TO BOOKING"]},t):"EDIT"==n.toUpperCase()?(0,k.jsxs)(s.Z,{onClick:()=>y(n),children:[(0,k.jsx)(i.Z,{}),"Edit"]},t):"DELETE"==n.toUpperCase()?(0,k.jsxs)(s.Z,{onClick:()=>y(n),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,k.jsx)(d.Z,{style:{color:"red"}}),"Delete"]},t):"VIEW"==n.toUpperCase()?(0,k.jsxs)(s.Z,{onClick:()=>y(n),children:[(0,k.jsx)(g.Z,{}),"View"]},t):"CANCEL"==n.toUpperCase()?(0,k.jsxs)(s.Z,{sx:{color:"red"},onClick:()=>y(n),children:[(0,k.jsx)(p.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},t):(0,k.jsxs)(s.Z,{onClick:()=>y(n),children:[(0,k.jsx)(x.Z,{}),n]},t)))})]})}},5842:function(n,t,o){var e=o(7313),a=o(1095),r=o(4469),c=o(3213),s=o(9840),i=o(8310),l=o(2247),u=o(5908),d=o(9289),g=o(7131),p=o(1113),x=o(1198),h=o(301),k=o(1322),f=o(1387),m=o(6417);const y=e.forwardRef((function(n,t){return(0,m.jsx)(h.Z,{direction:"up",ref:t,...n})}));t.Z=n=>{const[t,o]=e.useState(n.open);const[h,j]=e.useState({}),Z=()=>{o(!1),n.close()},w=n=>new Date(n).toLocaleString(),v=n=>{(0,k.ut)(n).then((n=>{j(n),console.log(n)})).catch((n=>{console.log(n),f.Am.error(n.response.data.message)}))},C=(t,o)=>{(0,k.jK)({status:o,allocId:t}).then((t=>{console.log(t),f.Am.success("status updated successfully"),v({doBookingId:n.doId})})).catch((n=>{console.log(n),f.Am.error(n.response.data.message)}))};return(0,e.useEffect)((()=>{n.doId&&v({doBookingId:n.doId})}),[]),(0,m.jsx)(e.Fragment,{children:(0,m.jsxs)(r.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:Z,TransitionComponent:y,children:[(0,m.jsx)(u.Z,{sx:{position:"relative"},children:(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(g.Z,{edge:"start",color:"inherit",onClick:Z,"aria-label":"close",children:(0,m.jsx)(x.Z,{})}),(0,m.jsx)(p.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Allocated Details"}),(0,m.jsx)(a.Z,{autoFocus:!0,color:"inherit",onClick:Z,children:"Close"})]})}),(0,m.jsx)(i.Z,{children:h&&h.truckBookingId&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(c.Z,{primary:h.truckBookingId.truck.name,secondary:h.truckBookingId.truck.registrationNumber}),(0,m.jsx)(c.Z,{primary:h.truckBookingId.truck.category,secondary:h.truckBookingId.truck.truckType+" FT"}),(0,m.jsx)(c.Z,{primary:"allocated on:",secondary:w(h.allocatedOn)}),(0,m.jsx)(c.Z,{primary:h.truckBookingId.truck.companyId.name,secondary:h.truckBookingId.truck.companyId.contactNumber})]},1),(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(c.Z,{primary:h.truckBookingId.truck.companyId.ownerName,secondary:h.truckBookingId.truck.companyId.address}),(0,m.jsx)(c.Z,{primary:"driver: "+h.truckBookingId.truck.driverId.name,secondary:h.truckBookingId.truck.driverId.contactNumber}),(0,m.jsx)(c.Z,{primary:"Date on:",secondary:w(h.truckBookingId.availableFrom)}),(0,m.jsx)(c.Z,{primary:"Status:",secondary:h.status}),"allocated"===h.status?(0,m.jsx)(a.Z,{variant:"contained",onClick:()=>C(h._id,"ongoing"),children:"Move to Live"}):"ongoing"===h.status?(0,m.jsx)(a.Z,{variant:"contained",onClick:()=>C(h._id,"done"),children:"Move to Done"}):"expired"===h.status?(0,m.jsx)(a.Z,{variant:"contained",disabled:!0,children:"Expired"}):null]},2),(0,m.jsx)(l.Z,{})]})})]})})}},6167:function(n,t,o){var e=o(7313),a=o(1095),r=o(4469),c=o(3213),s=o(9840),i=o(8310),l=o(2247),u=o(5908),d=o(9289),g=o(7131),p=o(1113),x=o(1198),h=o(301),k=o(1387),f=o(1322),m=o(6417);const y=e.forwardRef((function(n,t){return(0,m.jsx)(h.Z,{direction:"up",ref:t,...n})}));t.Z=n=>{const[t,o]=e.useState(n.open);const[h,j]=e.useState([]),Z=()=>{o(!1),n.close()};return(0,e.useEffect)((()=>{n.type&&(n=>{console.log(n),(0,f.VW)(n).then((n=>{j(n),console.log(n)})).catch((n=>{console.log(n)}))})({status:"inqueue",type:n.type,date:n.date})}),[]),(0,m.jsx)(e.Fragment,{children:(0,m.jsxs)(r.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:Z,TransitionComponent:y,children:[(0,m.jsx)(u.Z,{sx:{position:"relative"},children:(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(g.Z,{edge:"start",color:"inherit",onClick:Z,"aria-label":"close",children:(0,m.jsx)(x.Z,{})}),(0,m.jsx)(p.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Truck Allocation"}),(0,m.jsx)(a.Z,{autoFocus:!0,color:"inherit",onClick:Z,children:"Close"})]})}),(0,m.jsx)(i.Z,{children:h.map((t=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(c.Z,{primary:t.truck.name,secondary:t.truck.registrationNumber}),(0,m.jsx)(c.Z,{primary:t.truck.companyId.name,secondary:t.truck.companyId.contactNumber}),(0,m.jsx)(c.Z,{primary:t.truck.category,secondary:t.truck.truckType+" FT"}),(0,m.jsx)(a.Z,{variant:"contained",onClick:()=>(t=>{if(console.log(t),!n.date||!n.doId)return console.log(err),!1;(0,f.T7)({doBookingId:n.doId,doDate:n.date,truckBookingId:t}).then((n=>{console.log(n),k.Am.success("DO allocation successfull!"),Z()})).catch((n=>{k.Am.error(n.response.data.message),console.log(n)}))})(t._id),children:"Allocate"})]},t._id),(0,m.jsx)(l.Z,{})]})))})]})})}},1322:function(n,t,o){o.d(t,{$K:function(){return g},$g:function(){return v},Au:function(){return d},Dx:function(){return I},ES:function(){return F},GB:function(){return p},Gu:function(){return l},Jq:function(){return N},Jr:function(){return m},KI:function(){return D},Mg:function(){return _},Pe:function(){return h},Q1:function(){return f},RY:function(){return C},S1:function(){return S},T7:function(){return Z},VW:function(){return y},Wo:function(){return T},X2:function(){return E},Xy:function(){return b},a2:function(){return k},aZ:function(){return u},cW:function(){return A},jK:function(){return w},ji:function(){return s},kR:function(){return B},kl:function(){return x},lQ:function(){return r},oR:function(){return c},r7:function(){return i},ut:function(){return j},zE:function(){return O}});var e=o(5662);console.log(window.location.hostname);const a=e.Z.create({baseURL:"http://localhost:5000/api/",headers:{"Content-Type":"application/json"}});async function r(n){const t=await a.post("company",n);return console.log(t.data),t.data}async function c(n){console.log(n);const t=await a.delete("company/"+n,n);return console.log(t.data),t.data}async function s(n,t){console.log(t);const o=await a.patch("company/"+n,t);return console.log(o.data),o.data}async function i(n){const t=await a.post("company/getAllCompany",n);return console.log(t.data),t.data}async function l(n){const t=await a.post("truck",n);return console.log(t.data),t.data}async function u(n){const t=await a.post("truck/getAllTruck",n);return console.log(t.data),t.data}async function d(n){const t=await a.post("truck/updateTruckStatus",n);return console.log(t.data),t.data}async function g(n){console.log(n);const t=await a.delete("truck/"+n,n);return console.log(t.data),t.data}async function p(n){const t=await a.post("truck/updateTruckBookingStatus",n);return console.log(t.data),t.data}async function x(n){const t=await a.post("truck/getAllTruckBookings",n);return console.log(t.data),t.data}async function h(n){const t=await a.post("truck/addTruckToBooking",n);return console.log(t.data),t.data}async function k(n){const t=await a.post("party/getAllParty",n);return console.log(t.data),t.data}async function f(n){const t=await a.post("party",n);return console.log(t.data),t.data}async function m(n){return(await a.post("truck/getAllTruckBookings",{status:n.status})).data}async function y(n){return(await a.post("truck/getInQueueTrucks",n)).data}async function j(n){const t=await a.post("allocation/getAllocationDetails",n);return console.log(t.data),t.data}async function Z(n){const t=await a.post("allocation",n);return console.log(t.data),t.data}async function w(n){const t=await a.post("allocation/changeAllocationStatus",n);return console.log(t.data),t.data}async function v(n){const t=await a.post("user/login",n);return console.log("heeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"),console.log(t),console.log(t.data),t.data}async function C(n){const t=await a.post("location/getAllLocation",n);return console.log(t.data),t.data}async function I(n){const t=await a.post("location",n);return console.log(t.data),t.data}async function b(n){const t=await a.post("doBooking/getAllDO",n);return console.log(t.data),t.data}async function A(n){const t=await a.post("doBooking",n);return console.log(t.data),t.data}async function B(n){const t=await a.post("doBooking/uploadDO",n);return console.log(t.data),t.data}async function S(n){const t=await a.post("doBooking/getAllDeliveryOrders",n);return console.log(t.data),t.data}async function T(n){const t=await a.delete("doBooking",n);return console.log(t.data),t.data}async function D(n){const t=await a.delete("doBooking/deleteDeliveryOrder/"+n);return console.log(t.data),t.data}async function E(n){const t=await a.post("driver",n);return console.log(t.data),t.data}async function O(n){const t=await a.post("driver/getAllDrivers",n);return console.log(t.data),t.data}async function N(n){const t=await a.post("driver/getCompanyDrivers",n);return console.log(t.data),t.data}async function _(n){console.log(n);const t=await a.delete("driver/"+n,n);return console.log(t.data),t.data}async function F(n,t){console.log(t);const o=await a.patch("driver/"+n,t);return console.log(o.data),o.data}a.interceptors.request.use((async n=>{const t=localStorage.getItem("token");return t?n.headers.Authorization="Bearer "+t:console.warn("Token not found in localStorage"),n}),(n=>Promise.reject(n))),a.interceptors.response.use((n=>n),(n=>(n.response&&401===n.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),window.location.href="/login"),Promise.reject(n))))},5266:function(n,t,o){o.d(t,{h:function(){return r}});var e=o(6031),a=o.n(e);const r=(n,t,o)=>n.map((n=>a().mapKeys(n,((n,e)=>{for(let a=0;a<o.length;a++)if(e===t[a])return o[a];return e}))))},4201:function(n,t,o){o.r(t),o.d(t,{default:function(){return C}});var e=o(7313),a=o(3497),r=o(1629),c=o(6835),s=o(3477),i=o(4076),l=o(7478),u=o(3467),d=o(9848),g=o(6167),p=o(5842),x=o(6417);function h(n){let{data:t,header:o,isShowSerialNo:h=!1,isShowAction:k=!1,actions:f=["Edit","Delete"],onActionChange:m,onClickAction:y}=n;const[j,Z]=(0,e.useState)(null),[w,v]=(0,e.useState)(null),[C,I]=(0,e.useState)(!1);return(0,x.jsxs)(a.Z,{children:[(0,x.jsx)(r.Z,{children:(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(s.Z,{children:(0,x.jsxs)(i.Z,{children:[h&&(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:"SLNO"}),o.map(((n,t)=>(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:n},t))),k&&(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,x.jsx)(u.Z,{children:t.map(((n,t)=>{return(0,x.jsxs)(i.Z,{onClick:()=>(n=>{y&&y(n)})(n._id),children:[h&&(0,x.jsx)(l.Z,{children:t+1}),(0,x.jsx)(l.Z,{children:n.truck.name}),(0,x.jsx)(l.Z,{children:n.truck.registrationNumber}),(0,x.jsx)(l.Z,{children:n.truck.category}),(0,x.jsx)(l.Z,{children:n.truck.truckType}),(0,x.jsx)(l.Z,{children:(o=n.availableFrom,new Date(o).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}))}),k&&(0,x.jsx)(l.Z,{children:(0,x.jsx)(d.Z,{data:n,onActionChange:n=>{m(n)},actions:f})})]},t);var o}))})]})}),j&&(0,x.jsx)(g.Z,{open:C,close:()=>{Z(null),I(!1)},type:j}),w&&(0,x.jsx)(p.Z,{open:C,close:()=>{v(null),I(!1)},doId:w})]})}var k=o(5266),f=o(1387);const m=["name","RegNo","category","truckType","availableFrom"];function y(n){let{data:t,updateStatus:o,updateData:e}=n;const a=(0,k.h)(t,["name","registrationNumber","category","truckType","availableFrom"],m);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(h,{data:a,header:m,isShowSerialNo:!0,isShowAction:!0,actions:["cancel"],onActionChange:n=>{console.log(n),"cancel"==n.action&&(console.log(n.data._id),o({TruckBookingId:n.data._id,status:"cancelled",cancelReason:"cancelled By Transporter"}).then((n=>{console.log(n.message),f.Am.success(n.message),e({status:"inqueue"})})).catch((n=>{console.error(n),f.Am.error("Error occured while updating")})))}})})}var j=o(2832),Z=o(1113);function w(){return(0,x.jsx)(a.Z,{children:(0,x.jsx)(j.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:(0,x.jsx)(Z.Z,{variant:"h3",color:"secondary.main",children:"InQueue Trucks"})})})}var v=o(1322);function C(){const[n,t]=(0,e.useState)([]),o=n=>{(0,v.kl)(n).then((n=>{t(n)})).catch((n=>{console.log(n)}))};return(0,e.useEffect)((()=>{o({status:"inqueue"})}),[]),(0,x.jsxs)(j.Z,{direction:"column",gap:2,children:[(0,x.jsx)(w,{}),(0,x.jsx)(y,{data:n,updateStatus:v.GB,updateData:o})]})}}}]);