"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[999],{8999:function(n,t,e){e.d(t,{Z:function(){return h}});var r=e(7313),o=e(3497),a=e(1629),c=e(6835),i=e(3477),s=e(4076),u=e(7478),l=e(3467),d=e(1095),p=e(9848),f=e(6167),g=e(5842),y=e(6417);function h(n){let{data:t,header:e,isShowSerialNo:h=!1,isShowAction:x=!1,actions:k=["Edit","Delete"],onActionChange:j,onClickAction:m,refreshData:Z}=n;const[w,C]=(0,r.useState)(null),[I,v]=(0,r.useState)(null),[A,b]=(0,r.useState)(null),[B,T]=(0,r.useState)(null),[D,S]=(0,r.useState)(!1);return(0,y.jsxs)(o.Z,{children:[(0,y.jsx)(a.Z,{children:(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(i.Z,{children:(0,y.jsxs)(s.Z,{children:[h&&(0,y.jsx)(u.Z,{sx:{color:"primary.main"},children:"SLNO"}),e.map(((n,t)=>(0,y.jsx)(u.Z,{sx:{color:"primary.main"},children:n},t))),x&&(0,y.jsx)(u.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,y.jsx)(l.Z,{children:t.map(((n,t)=>(0,y.jsxs)(s.Z,{onClick:()=>(n=>{m&&m(n)})(n._id),children:[h&&(0,y.jsx)(u.Z,{children:t+1}),e.map(((t,e)=>{if("IMAGE"===t.toUpperCase())return(0,y.jsx)(u.Z,{children:(0,y.jsx)("img",{style:{height:"100px"},src:`${n[`${t}`]}`,alt:"img"})},e);if("allocated"!=n.status&&"ALLOCATION"===t.toUpperCase())return console.log("dfffffffffffffffffffffffffffffffffffff"),console.log(n),(0,y.jsx)(u.Z,{children:(0,y.jsx)(d.Z,{variant:"contained",onClick:()=>(n=>{console.log("select alloccccccccccccccccccccccc"),console.log(n),console.log("heeeeeeeeeeeeeeeeeeeeeeedataaaaaaaaaaaaaaaa"),C(n.truckType),v(n.date),T(n.doId),console.log(n.truckType),S(!0)})({doId:n._id,truckType:n.truckType,date:n["available from"]}),children:"Allocate"})},e);if("allocated"==n.status&&"ALLOCATION"===t.toUpperCase())return(0,y.jsx)(u.Z,{children:(0,y.jsx)(d.Z,{variant:"contained",onClick:()=>{return t=n._id,b(t),void S(!0);var t},children:"View Allocation"})},e);if("VIEW DO"===t.toUpperCase()){const t=n["view DO"]||n.deliveryOrderId&&n.deliveryOrderId.doLink;return t?(0,y.jsx)(u.Z,{children:(0,y.jsx)(d.Z,{variant:"contained",onClick:()=>window.open(t,"_blank"),children:"View File"})},e):(0,y.jsx)(u.Z,{children:(0,y.jsx)(d.Z,{variant:"contained",disabled:!0,children:"No File"})},e)}return"isHighRangeArea"!=n.status&&"ISHIGHRANGEAREA"===t.toUpperCase()?(0,y.jsx)(u.Z,{children:n[`${t}`]?"Yes":"No"},e):"STATUS"===t.toUpperCase()?(0,y.jsx)(u.Z,{children:n[`${t}`]?"Active":"Inactive"},e):(0,y.jsx)(u.Z,{children:n[`${t}`]},e)})),x&&(0,y.jsx)(u.Z,{children:(0,y.jsx)(p.Z,{data:n,onActionChange:n=>{j(n)},actions:k})})]},t)))})]})}),w&&(0,y.jsx)(f.Z,{open:D,close:()=>{C(null),console.log("heeeeeeeeeeeeeeeeeeeeeeeey"),Z(),S(!1)},doId:B,date:I,type:w}),A&&(0,y.jsx)(g.Z,{open:D,close:()=>{b(null),Z(),S(!1)},doId:A})]})}},9848:function(n,t,e){e.d(t,{Z:function(){return k}});var r=e(7313),o=e(7592),a=e(7551),c=e(9601),i=e(1405),s=e(5954),u=e(8210),l=e(8790),d=e(4481),p=e(9916),f=e(712),g=e(7474),y=e(7131),h=e(6417);const x=(0,o.ZP)((n=>(0,h.jsx)(c.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...n})))((n=>{let{theme:t}=n;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:130,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,a.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function k(n){let{data:t,actions:e=["Edit","Delete"],onActionChange:o}=n;const[a,c]=r.useState(null),k=Boolean(a),j=n=>{c(null),o&&o({action:n,data:t})};return(0,h.jsxs)("div",{children:[(0,h.jsx)(y.Z,{variant:"contained",onClick:n=>{c(n.currentTarget)},children:(0,h.jsx)(u.Z,{})}),(0,h.jsx)(x,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:a,open:k,onClose:j,children:e.map(((n,t)=>"ADD TO QUEUE"==n.toUpperCase()?(0,h.jsxs)(i.Z,{onClick:()=>j(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,h.jsx)(l.Z,{style:{color:"green"}}),"Add To Queue"]},t):"ADDBOOKING"==n.toUpperCase()?(0,h.jsxs)(i.Z,{onClick:()=>j(n),sx:{color:"green","&:hover":{backgroundColor:"rgba(72, 113, 247, 0.1)"}},children:[(0,h.jsx)(l.Z,{style:{color:"green"}}),"Add TO BOOKING"]},t):"EDIT"==n.toUpperCase()?(0,h.jsxs)(i.Z,{onClick:()=>j(n),children:[(0,h.jsx)(s.Z,{}),"Edit"]},t):"DELETE"==n.toUpperCase()?(0,h.jsxs)(i.Z,{onClick:()=>j(n),sx:{color:"red","&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},children:[(0,h.jsx)(d.Z,{style:{color:"red"}}),"Delete"]},t):"VIEW"==n.toUpperCase()?(0,h.jsxs)(i.Z,{onClick:()=>j(n),children:[(0,h.jsx)(p.Z,{}),"View"]},t):"CANCEL"==n.toUpperCase()?(0,h.jsxs)(i.Z,{sx:{color:"red"},onClick:()=>j(n),children:[(0,h.jsx)(f.Z,{color:"primary",style:{color:"red"}}),"Cancel"]},t):(0,h.jsxs)(i.Z,{onClick:()=>j(n),children:[(0,h.jsx)(g.Z,{}),n]},t)))})]})}},5842:function(n,t,e){var r=e(7313),o=e(1095),a=e(4469),c=e(3213),i=e(9840),s=e(8310),u=e(2247),l=e(5908),d=e(9289),p=e(7131),f=e(1113),g=e(1198),y=e(301),h=e(1322),x=e(1387),k=e(6417);const j=r.forwardRef((function(n,t){return(0,k.jsx)(y.Z,{direction:"up",ref:t,...n})}));t.Z=n=>{const[t,e]=r.useState(n.open);const[y,m]=r.useState({}),Z=()=>{e(!1),n.close()},w=n=>new Date(n).toLocaleString(),C=n=>{(0,h.ut)(n).then((n=>{m(n),console.log(n)})).catch((n=>{console.log(n),x.Am.error(n.response.data.message)}))},I=(t,e)=>{(0,h.jK)({status:e,allocId:t}).then((t=>{console.log(t),x.Am.success("status updated successfully"),C({doBookingId:n.doId})})).catch((n=>{console.log(n),x.Am.error(n.response.data.message)}))};return(0,r.useEffect)((()=>{n.doId&&C({doBookingId:n.doId})}),[]),(0,k.jsx)(r.Fragment,{children:(0,k.jsxs)(a.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:Z,TransitionComponent:j,children:[(0,k.jsx)(l.Z,{sx:{position:"relative"},children:(0,k.jsxs)(d.Z,{children:[(0,k.jsx)(p.Z,{edge:"start",color:"inherit",onClick:Z,"aria-label":"close",children:(0,k.jsx)(g.Z,{})}),(0,k.jsx)(f.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Allocated Details"}),(0,k.jsx)(o.Z,{autoFocus:!0,color:"inherit",onClick:Z,children:"Close"})]})}),(0,k.jsx)(s.Z,{children:y&&y.truckBookingId&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(c.Z,{primary:y.truckBookingId.truck.name,secondary:y.truckBookingId.truck.registrationNumber}),(0,k.jsx)(c.Z,{primary:y.truckBookingId.truck.category,secondary:y.truckBookingId.truck.truckType+" FT"}),(0,k.jsx)(c.Z,{primary:"allocated on:",secondary:w(y.allocatedOn)}),(0,k.jsx)(c.Z,{primary:y.truckBookingId.truck.companyId.name,secondary:y.truckBookingId.truck.companyId.contactNumber})]},1),(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(c.Z,{primary:y.truckBookingId.truck.companyId.ownerName,secondary:y.truckBookingId.truck.companyId.address}),(0,k.jsx)(c.Z,{primary:"driver: "+y.truckBookingId.truck.driverId.name,secondary:y.truckBookingId.truck.driverId.contactNumber}),(0,k.jsx)(c.Z,{primary:"Date on:",secondary:w(y.truckBookingId.availableFrom)}),(0,k.jsx)(c.Z,{primary:"Status:",secondary:y.status}),"allocated"===y.status?(0,k.jsx)(o.Z,{variant:"contained",disabled:!0,onClick:()=>I(y._id,"ongoing"),children:"Move to Live"}):"ongoing"===y.status?(0,k.jsx)(o.Z,{variant:"contained",disabled:!0,onClick:()=>I(y._id,"done"),children:"Move to Done"}):"expired"===y.status?(0,k.jsx)(o.Z,{variant:"contained",disabled:!0,children:"Expired"}):null]},2),(0,k.jsx)(u.Z,{})]})})]})})}},6167:function(n,t,e){var r=e(7313),o=e(1095),a=e(4469),c=e(3213),i=e(9840),s=e(8310),u=e(2247),l=e(5908),d=e(9289),p=e(7131),f=e(1113),g=e(1198),y=e(301),h=e(1387),x=e(1322),k=e(8372),j=e(6417);const m=r.forwardRef((function(n,t){return(0,j.jsx)(y.Z,{direction:"up",ref:t,...n})}));t.Z=n=>{const[t,e]=r.useState(n.open);const[y,Z]=r.useState([]),w=()=>{e(!1),n.close()};return(0,r.useEffect)((()=>{n.type&&(console.log(n),(n=>{console.log(n),(0,x.VW)(n).then((n=>{Z(n),console.log(n)})).catch((n=>{console.log(n)}))})({status:"inqueue",type:n.type,date:n.date}))}),[]),(0,j.jsx)(r.Fragment,{children:(0,j.jsxs)(a.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:w,TransitionComponent:m,children:[(0,j.jsx)(l.Z,{sx:{position:"relative"},children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(p.Z,{edge:"start",color:"inherit",onClick:w,"aria-label":"close",children:(0,j.jsx)(g.Z,{})}),(0,j.jsx)(f.Z,{sx:{ml:2,flex:1,color:"white"},variant:"h3",component:"div",children:"Truck Allocation"}),(0,j.jsx)(o.Z,{autoFocus:!0,color:"inherit",onClick:w,children:"Close"})]})}),(0,j.jsxs)(s.Z,{children:[0===y.length&&(0,j.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,j.jsx)(f.Z,{children:"No Trucks Inqueue within the date and type"})}),y.map(((t,e)=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(i.Z,{children:[(0,j.jsx)(c.Z,{primary:e+1}),(0,j.jsx)(c.Z,{primary:t.truck.name,secondary:t.truck.registrationNumber}),(0,j.jsx)(c.Z,{primary:t.truck.companyId.name,secondary:t.truck.companyId.contactNumber}),(0,j.jsx)(c.Z,{primary:t.truck.category,secondary:t.truck.truckType+" FT"}),(0,j.jsx)(o.Z,{variant:"contained",onClick:()=>(t=>{if(console.log(t),console.log(n),!n.date||!n.doId)return console.log("date not found"),!1;(0,x.T7)({doBookingId:n.doId,doDate:n.date,truckBookingId:t}).then((n=>{console.log(n),h.Am.success("DO allocation successfull!"),w()})).catch((n=>{h.Am.error(n.response.data.message),console.log(n)}))})(t._id),children:"Allocate"})]},t._id),(0,j.jsx)(u.Z,{})]})))]})]})})}},1322:function(n,t,e){e.d(t,{$K:function(){return d},$g:function(){return S},AW:function(){return T},Au:function(){return l},BU:function(){return C},CE:function(){return j},Dx:function(){return O},ES:function(){return H},Et:function(){return F},GB:function(){return f},Gu:function(){return s},IB:function(){return W},Jq:function(){return Q},Jr:function(){return Z},K3:function(){return p},KI:function(){return K},M$:function(){return _},Mg:function(){return q},Pe:function(){return y},Q1:function(){return x},RY:function(){return E},S1:function(){return z},T5:function(){return k},T7:function(){return v},Tj:function(){return R},VW:function(){return w},Wo:function(){return G},X2:function(){return P},X6:function(){return m},Xy:function(){return U},a2:function(){return h},aZ:function(){return u},cW:function(){return $},cn:function(){return b},h8:function(){return D},jK:function(){return A},ji:function(){return c},kR:function(){return N},kl:function(){return g},lQ:function(){return o},oR:function(){return a},r7:function(){return i},ss:function(){return L},ut:function(){return I},uz:function(){return B},xF:function(){return M},zE:function(){return V}});const r=e(5662).Z.create({baseURL:"http://localhost:5000/api/",headers:{"Content-Type":"application/json"}});async function o(n){return(await r.post("company",n)).data}async function a(n){return(await r.delete("company/"+n,n)).data}async function c(n,t){return(await r.patch("company/"+n,t)).data}async function i(n){return(await r.post("company/getAllCompany",n)).data}async function s(n){return(await r.post("truck",n)).data}async function u(n){return(await r.post("truck/getAllTruck",n)).data}async function l(n){return(await r.post("truck/updateTruckStatus",n)).data}async function d(n){return(await r.delete("truck/"+n,n)).data}async function p(n,t){return(await r.patch("truck/"+n,t)).data}async function f(n){return(await r.post("truck/updateTruckBookingStatus",n)).data}async function g(n){return(await r.post("truck/getAllTruckBookings",n)).data}async function y(n){return(await r.post("truck/addTruckToBooking",n)).data}async function h(n){return(await r.post("party/getAllParty",n)).data}async function x(n){return(await r.post("party",n)).data}async function k(n){return(await r.delete(`party/${n}`)).data}async function j(n,t){return(await r.post(`party/${n}`,t)).data}async function m(n){return(await r.put(`party/updateStatus/${n}`)).data}async function Z(n){return(await r.post("truck/getAllTruckBookings",{status:n.status})).data}async function w(n){return(await r.post("truck/getInQueueTrucks",n)).data}async function C(n){return(await r.post("truck/getTruckQueue",n)).data}async function I(n){return(await r.post("allocation/getAllocationDetails",n)).data}async function v(n){return(await r.post("allocation",n)).data}async function A(n){return(await r.post("allocation/changeAllocationStatus",n)).data}async function b(n){return(await r.post("user",n)).data}async function B(n){return(await r.post("user/editUser",n)).data}async function T(n){return(await r.get("user/getAllUsers"+(n?`?companyId=${n}`:""))).data}async function D(n){return(await r.delete(`user/${n}`)).data}async function S(n){const t=await r.post("user/login",n);return console.log(t),t.data}async function E(n){return(await r.post("location/getAllLocation",n)).data}async function O(n){return(await r.post("location",n)).data}async function U(n){return(await r.post("doBooking/getAllDO",n)).data}async function $(n){return(await r.post("doBooking",n)).data}async function N(n){return(await r.post("doBooking/uploadDO",n)).data}async function _(n,t){try{return(await r.put(`doBooking/updateDO/${n}`,t)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function F(n,t){try{return(await r.post(`doBooking/cancelDO/${n}`,t)).data}catch(e){throw console.error("Error updating delivery order:",e),e}}async function L(n,t){try{return(await r.post(`doBooking/cancelDOBooking/${n}`,t)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function M(n){try{return(await r.post(`doBooking/reopen-do-booking/${n}`)).data}catch(t){throw console.error("Error cancelling Do booking:",t),t}}async function W(n,t){try{return(await r.post(`allocation/cancel-allocated-booking/${n}`,t)).data}catch(e){throw console.error("Error cancelling Do booking:",e),e}}async function R(n){try{return(await r.post(`allocation/re-allocate-booking/${n}`)).data}catch(t){throw console.error("Error cancelling Do booking:",t),t}}async function z(n){return(await r.post("doBooking/getAllDeliveryOrders",n)).data}async function G(n){return(await r.delete("doBooking",n)).data}async function K(n){return(await r.delete("doBooking/deleteDeliveryOrder/"+n)).data}async function P(n){return(await r.post("driver",n)).data}async function V(n){return(await r.post("driver/getAllDrivers",n)).data}async function Q(n){return(await r.post("driver/getCompanyDrivers",n)).data}async function q(n){return(await r.delete("driver/"+n,n)).data}async function H(n,t){return(await r.patch("driver/"+n,t)).data}r.interceptors.request.use((async n=>{const t=localStorage.getItem("token");return t?n.headers.Authorization="Bearer "+t:console.warn("Token not found in localStorage"),n}),(n=>Promise.reject(n))),r.interceptors.response.use((n=>n),(n=>(n.response&&401===n.response.status&&(console.log("Unauthorized, logging out..."),localStorage.clear(),window.location.href="/login"),Promise.reject(n))))}}]);