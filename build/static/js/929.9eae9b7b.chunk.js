"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[929],{2186:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(3365),a=r(4469),s=r(3604),i=r(2832),c=r(1113),o=r(7313),l=r(1766),d=r(6417);const u=o.forwardRef((function(e,n){return(0,d.jsx)(t.Z,{ref:n,...e})}));function m(e){let{title:n,children:r,open:t,onClose:o,...m}=e;return(0,d.jsxs)(a.Z,{...m,open:t,TransitionComponent:u,children:[(0,d.jsx)(s.Z,{children:(0,d.jsxs)(i.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(c.Z,{variant:"h2",color:"primary.main",children:n}),(0,d.jsx)(l.Z,{sx:{cursor:"pointer"},onClick:o})]})}),r]})}},8999:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(7313),a=r(3497),s=r(1629),i=r(6835),c=r(3477),o=r(4076),l=r(7478),d=r(3467),u=r(1095),m=r(9848),h=r(6167),x=r(5842),p=r(6417);function f(e){let{data:n,header:r,isShowSerialNo:f=!1,isShowAction:j=!1,actions:g=["Edit","Delete"],onActionChange:Z,onClickAction:b,refreshData:y}=e;const[v,C]=(0,t.useState)(null),[N,S]=(0,t.useState)(null),[A,w]=(0,t.useState)(null),[I,k]=(0,t.useState)(null),[T,D]=(0,t.useState)(!1);return(0,p.jsxs)(a.Z,{children:[(0,p.jsx)(s.Z,{children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(c.Z,{children:(0,p.jsxs)(o.Z,{children:[f&&(0,p.jsx)(l.Z,{sx:{color:"primary.main"},children:"SLNO"}),r.map(((e,n)=>(0,p.jsx)(l.Z,{sx:{color:"primary.main"},children:e},n))),j&&(0,p.jsx)(l.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,p.jsx)(d.Z,{children:n.map(((e,n)=>(0,p.jsxs)(o.Z,{onClick:()=>(e=>{b&&b(e)})(e._id),children:[f&&(0,p.jsx)(l.Z,{children:n+1}),r.map(((n,r)=>{if("IMAGE"===n.toUpperCase())return(0,p.jsx)(l.Z,{children:(0,p.jsx)("img",{style:{height:"100px"},src:`${e[`${n}`]}`,alt:"img"})},r);if("allocated"!=e.status&&"ALLOCATION"===n.toUpperCase())return console.log("dfffffffffffffffffffffffffffffffffffff"),console.log(e),(0,p.jsx)(l.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>(e=>{console.log("select alloccccccccccccccccccccccc"),console.log(e),console.log("heeeeeeeeeeeeeeeeeeeeeeedataaaaaaaaaaaaaaaa"),C(e.truckType),S(e.date),k(e.doId),console.log(e.truckType),D(!0)})({doId:e._id,truckType:e.truckType,date:e["available from"]}),children:"Allocate"})},r);if("allocated"==e.status&&"ALLOCATION"===n.toUpperCase())return(0,p.jsx)(l.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>{return n=e._id,w(n),void D(!0);var n},children:"View Allocation"})},r);if("VIEW DO"===n.toUpperCase()){const n=e["view DO"]||e.deliveryOrderId&&e.deliveryOrderId.doLink;return n?(0,p.jsx)(l.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",onClick:()=>window.open(n,"_blank"),children:"View File"})},r):(0,p.jsx)(l.Z,{children:(0,p.jsx)(u.Z,{variant:"contained",disabled:!0,children:"No File"})},r)}return"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===n.toUpperCase()?(0,p.jsx)(l.Z,{children:e[`${n}`]?"Yes":"No"},r):"STATUS"===n.toUpperCase()?(0,p.jsx)(l.Z,{children:e[`${n}`]?"Active":"Inactive"},r):(0,p.jsx)(l.Z,{children:e[`${n}`]},r)})),j&&(0,p.jsx)(l.Z,{children:(0,p.jsx)(m.Z,{data:e,onActionChange:e=>{Z(e)},actions:g})})]},n)))})]})}),v&&(0,p.jsx)(h.Z,{open:T,close:()=>{C(null),console.log("heeeeeeeeeeeeeeeeeeeeeeeey"),y(),D(!1)},doId:I,date:N,type:v}),A&&(0,p.jsx)(x.Z,{open:T,close:()=>{w(null),y(),D(!1)},doId:A})]})}},5266:function(e,n,r){r.d(n,{h:function(){return s}});var t=r(6031),a=r.n(t);const s=(e,n,r)=>e.map((e=>a().mapKeys(e,((e,t)=>{for(let a=0;a<r.length;a++)if(t===n[a])return r[a];return t}))))},929:function(e,n,r){r.r(n),r.d(n,{default:function(){return W}});var t=r(7313),a=r(8999),s=r(5266),i=r(9536),c=r(9019),o=r(4631),l=r(1387),d=r(1322),u=r(7825),m=r(2832),h=r(1113),x=r(1550),p=r(8797),f=r(1405),j=r(5480),g=r(1095),Z=r(5627),b=r(2186),y=r(4605),v=r(3208),C=r(5904),N=r(658),S=r.n(N),A=r(6417);function w(e){let{getData:n,open:r,onClose:a,isEdit:s=!1,data:i={}}=e;const[c,N]=(0,t.useState)([]),w=["LMV TT","MPV","MGV","LMV","MCWG","MCWOG"],{control:I,handleSubmit:k,formState:{errors:T}}=(0,Z.cI)({defaultValues:s?{name:i.Name,contactNumber:i.ContactNumber,address:i.Address,licenceNumber:i.licenceNumber,licenceType:i.licenceType,expiryDate:i.expiryDate?S()(i.expiryDate):null,companyId:i.companyId}:{name:"",contactNumber:"",address:"",licenceNumber:"",licenceType:"",expiryDate:null,companyId:""}}),[D,L]=t.useState(S()(i.expiryDate)||null),W=new Date,M=new Date(W),E=`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")}`;return(0,t.useEffect)((()=>{console.log(i),(0,d.r7)({companyTypes:["transporter","both"]}).then((e=>{console.log(e),N(e)})).catch((e=>{console.log(e),l.Am.error(e.message)}))}),[]),(0,A.jsx)(t.Fragment,{children:(0,A.jsx)(v._,{dateAdapter:C.y,children:(0,A.jsx)(b.Z,{open:r,fullWidth:!0,onClose:a,title:(s?"Edit":"Add")+" Driver",children:(0,A.jsx)("form",{onSubmit:k((e=>{if(console.log(e),!D)return console.log("Please select a date"),void l.Am.error("Please select a date");const r=S()(D).format("YYYY-MM-DD");s?(0,d.ES)(i._id,{name:e.name,contactNumber:e.contactNumber,address:e.address,licenceNumber:e.licenceNumber,licenceType:e.licenceType,expiryDate:r,companyId:e.companyId}).then((e=>{console.log(e),n(),a()})).catch((e=>{console.error(e),l.Am.error(e.message)})):(0,d.X2)({name:e.name,contactNumber:e.contactNumber,address:e.address,licenceNumber:e.licenceNumber,licenceType:e.licenceType,expiryDate:r,companyId:e.companyId}).then((e=>{console.log(e),n(),a()})).catch((e=>{console.error(e),l.Am.error(e.message)}))})),children:(0,A.jsx)(u.Z,{children:(0,A.jsxs)(m.Z,{direction:"column",sx:{p:2},spacing:1,children:[(0,A.jsx)(h.Z,{variant:"h5",children:"Driver Name"}),(0,A.jsx)(Z.Qr,{name:"name",control:I,render:e=>{let{field:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{...n,placeholder:"Enter Driver Name"}),T.name&&(0,A.jsx)("span",{style:{color:"#f00"},children:T.name.message})]})},rules:{required:"Driver Name is required"}}),(0,A.jsx)(h.Z,{variant:"h5",children:"Contact Number"}),(0,A.jsx)(Z.Qr,{name:"contactNumber",control:I,render:e=>{let{field:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{...n,placeholder:"Enter Contact Number"}),T.contactNumber&&(0,A.jsx)("span",{style:{color:"#f00"},children:T.contactNumber.message})]})},rules:{required:"Contact Number is required",pattern:{value:/^[0-9]{10}$/,message:"Contact Number must be exactly 10 digits"}}}),(0,A.jsx)(h.Z,{variant:"h5",children:"Address"}),(0,A.jsx)(Z.Qr,{name:"address",control:I,render:e=>{let{field:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{...n,placeholder:"Enter Address"}),T.address&&(0,A.jsx)("span",{style:{color:"#f00"},children:T.address.message})]})},rules:{required:"Address is required"}}),(0,A.jsx)(h.Z,{variant:"h5",children:"Licence Number"}),(0,A.jsx)(Z.Qr,{name:"licenceNumber",control:I,render:e=>{let{field:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{...n,placeholder:"Enter Licence Number"}),T.licenceNumber&&(0,A.jsx)("span",{style:{color:"#f00"},children:T.licenceNumber.message})]})},rules:{required:"Licence Number is required"}}),(0,A.jsx)(h.Z,{variant:"h5",children:"Licence Type"}),(0,A.jsxs)(x.Z,{error:Boolean(T.licenceType),children:[(0,A.jsx)(Z.Qr,{name:"licenceType",control:I,render:e=>{let{field:n}=e;return(0,A.jsx)(p.Z,{...n,labelId:"licenceType-select-label",id:"licenceType-select",value:n.value||"",onChange:e=>n.onChange(e.target.value),children:w.map((e=>(0,A.jsx)(f.Z,{value:e,children:e},e)))})},rules:{required:"Licence Type is required"}}),T.licenceType&&(0,A.jsx)(j.Z,{children:T.licenceType.message})]}),(0,A.jsx)(h.Z,{variant:"h5",children:"Expiry Date"}),(0,A.jsx)(x.Z,{sx:{mt:2,minWidth:120},children:(0,A.jsx)(y.M,{value:D||S()(i.expiryDate),onChange:e=>L(e),minDate:S()(E),renderInput:e=>(0,A.jsx)(o.Z,{...e})})}),(0,A.jsx)(h.Z,{variant:"h5",children:"Company"}),(0,A.jsxs)(x.Z,{error:Boolean(T.companyId),children:[(0,A.jsx)(Z.Qr,{name:"companyId",control:I,render:e=>{let{field:n}=e;return(0,A.jsxs)(p.Z,{...n,labelId:"company-select-label",id:"company-select",value:n.value||"",onChange:e=>n.onChange(e.target.value),children:[(0,A.jsx)(f.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),c.map((e=>(0,A.jsx)(f.Z,{value:e._id,children:e.name},e._id)))]})},rules:{required:"Company is required"}}),T.companyId&&(0,A.jsx)(j.Z,{children:T.companyId.message})]}),(0,A.jsx)(g.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:s?"Edit":"Add"})]})})})})})})}const I=["Name","ContactNumber","Address","CompanyName","licenceType","licenceNumber"];function k(e){let{data:n,updateData:r}=e;const[u,m]=(0,t.useState)(!1),[h,x]=(0,t.useState)(),[p,f]=(0,t.useState)(""),[j,g]=(0,t.useState)(""),[Z,b]=(0,t.useState)(""),y=n.filter((e=>{const n=e.name.toLowerCase().includes(p.toLowerCase()),r=e.companyName.toLowerCase().includes(j.toLowerCase()),t=e.licenceNumber.toLowerCase().includes(Z.toLowerCase());return n&&r&&t})),v=(0,s.h)(y,["name","contactNumber","address","companyName","licenceType","licenceNumber"],I),C="admin"===localStorage.getItem("role");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(i.Z,{sx:{mb:2},children:(0,A.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,A.jsx)(o.Z,{label:"Search by Name",variant:"outlined",size:"small",fullWidth:!0,value:p,onChange:e=>f(e.target.value)})}),C&&(0,A.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,A.jsx)(o.Z,{label:"Search by Company",variant:"outlined",size:"small",fullWidth:!0,value:j,onChange:e=>g(e.target.value)})}),(0,A.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,A.jsx)(o.Z,{label:"Search by License Number",variant:"outlined",size:"small",fullWidth:!0,value:Z,onChange:e=>b(e.target.value)})})]})}),u&&(0,A.jsx)(w,{open:u,getData:r,data:h,isEdit:!0,onClose:()=>{m(!1)}}),(0,A.jsx)(a.Z,{data:v,header:I,isShowSerialNo:!0,isShowAction:C,actions:["Edit","delete"],onActionChange:async e=>{console.log(e.action),"delete"==e.action?(console.log(e.data._id),x(e.data),(0,d.Mg)(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),l.Am.error(e.response.data.message)}))):"Edit"==e.action?(console.log(e.action),m(!0),x(e.data)):console.log(e.action)}})]})}var T=r(2040),D=r(3497);function L(e){let{buttonClick:n}=e;const r="admin"===localStorage.getItem("role");return(0,A.jsx)(D.Z,{children:(0,A.jsxs)(m.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsx)(h.Z,{variant:"h3",color:"secondary.main",children:"Manage Drivers"}),r&&(0,A.jsx)(g.Z,{variant:"contained",startIcon:(0,A.jsx)(T.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:n,children:"Add Driver"})]})})}function W(){const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)([]),s=()=>{(0,d.zE)().then((e=>{a(e)})).catch((e=>{console.log(e),l.Am.error(e.response.data.message)}))};return(0,t.useEffect)((()=>{s()}),[]),(0,A.jsxs)(m.Z,{direction:"column",gap:2,children:[(0,A.jsx)(w,{open:e,getData:s,onClose:()=>{n(!1)}}),(0,A.jsx)(L,{buttonClick:()=>n(!0)}),(0,A.jsx)(k,{data:r,updateData:s})]})}},2040:function(e,n,r){var t=r(1171),a=r(6417);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},1766:function(e,n,r){var t=r(1171),a=r(6417);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded")},7825:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(3366),a=r(7462),s=r(7313),i=r(4146),c=r(2298),o=r(1921),l=r(8831),d=r(4614),u=r(6694),m=r(1821),h=r(6417);const x=["className","component","disableGutters","fixed","maxWidth","classes"],p=(0,m.Z)(),f=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[`maxWidth${(0,l.Z)(String(r.maxWidth))}`],r.fixed&&n.fixed,r.disableGutters&&n.disableGutters]}}),j=e=>(0,d.Z)({props:e,name:"MuiContainer",defaultTheme:p}),g=(e,n)=>{const{classes:r,fixed:t,disableGutters:a,maxWidth:s}=e,i={root:["root",s&&`maxWidth${(0,l.Z)(String(s))}`,t&&"fixed",a&&"disableGutters"]};return(0,o.Z)(i,(e=>(0,c.ZP)(n,e)),r)};var Z=r(1615),b=r(7592),y=r(1033);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=f,useThemeProps:r=j,componentName:c="MuiContainer"}=e,o=n((e=>{let{theme:n,ownerState:r}=e;return(0,a.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!r.disableGutters&&{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}})}),(e=>{let{theme:n,ownerState:r}=e;return r.fixed&&Object.keys(n.breakpoints.values).reduce(((e,r)=>{const t=r,a=n.breakpoints.values[t];return 0!==a&&(e[n.breakpoints.up(t)]={maxWidth:`${a}${n.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:n,ownerState:r}=e;return(0,a.Z)({},"xs"===r.maxWidth&&{[n.breakpoints.up("xs")]:{maxWidth:Math.max(n.breakpoints.values.xs,444)}},r.maxWidth&&"xs"!==r.maxWidth&&{[n.breakpoints.up(r.maxWidth)]:{maxWidth:`${n.breakpoints.values[r.maxWidth]}${n.breakpoints.unit}`}})})),l=s.forwardRef((function(e,n){const s=r(e),{className:l,component:d="div",disableGutters:u=!1,fixed:m=!1,maxWidth:p="lg"}=s,f=(0,t.Z)(s,x),j=(0,a.Z)({},s,{component:d,disableGutters:u,fixed:m,maxWidth:p}),Z=g(j,c);return(0,h.jsx)(o,(0,a.Z)({as:d,ownerState:j,className:(0,i.Z)(Z.root,l),ref:n},f))}));return l}({createStyledComponent:(0,b.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,n[`maxWidth${(0,Z.Z)(String(r.maxWidth))}`],r.fixed&&n.fixed,r.disableGutters&&n.disableGutters]}}),useThemeProps:e=>(0,y.i)({props:e,name:"MuiContainer"})});var C=v}}]);