"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[217],{2186:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(3365),o=t(4469),a=t(3604),s=t(2832),i=t(1113),c=t(7313),l=t(1766),d=t(6417);const u=c.forwardRef((function(e,n){return(0,d.jsx)(r.Z,{ref:n,...e})}));function f(e){let{title:n,children:t,open:r,onClose:c,...f}=e;return(0,d.jsxs)(o.Z,{...f,open:r,TransitionComponent:u,children:[(0,d.jsx)(a.Z,{children:(0,d.jsxs)(s.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(i.Z,{variant:"h2",color:"primary.main",children:n}),(0,d.jsx)(l.Z,{sx:{cursor:"pointer"},onClick:c})]})}),t]})}},8999:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(7313),o=t(3497),a=t(1629),s=t(6835),i=t(3477),c=t(4076),l=t(7478),d=t(3467),u=t(1095),f=t(9848),m=t(6167),h=t(5842),x=t(6417);function Z(e){let{data:n,header:t,isShowSerialNo:Z=!1,isShowAction:p=!1,actions:j=["Edit","Delete"],onActionChange:g,onClickAction:v,refreshData:C}=e;const[y,b]=(0,r.useState)(null),[A,S]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),[P,k]=(0,r.useState)(null),[I,T]=(0,r.useState)(!1);return(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(a.Z,{children:(0,x.jsxs)(s.Z,{children:[(0,x.jsx)(i.Z,{children:(0,x.jsxs)(c.Z,{children:[Z&&(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:"SLNO"}),t.map(((e,n)=>(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:e},n))),p&&(0,x.jsx)(l.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,x.jsx)(d.Z,{children:n.map(((e,n)=>(0,x.jsxs)(c.Z,{onClick:()=>(e=>{v&&v(e)})(e._id),children:[Z&&(0,x.jsx)(l.Z,{children:n+1}),t.map(((n,t)=>{if("IMAGE"===n.toUpperCase())return(0,x.jsx)(l.Z,{children:(0,x.jsx)("img",{style:{height:"100px"},src:`${e[`${n}`]}`,alt:"img"})},t);if("allocated"!=e.status&&"ALLOCATION"===n.toUpperCase())return console.log("dfffffffffffffffffffffffffffffffffffff"),console.log(e),(0,x.jsx)(l.Z,{children:(0,x.jsx)(u.Z,{variant:"contained",onClick:()=>(e=>{console.log("select alloccccccccccccccccccccccc"),console.log(e),console.log("heeeeeeeeeeeeeeeeeeeeeeedataaaaaaaaaaaaaaaa"),b(e.truckType),S(e.date),k(e.doId),console.log(e.truckType),T(!0)})({doId:e._id,truckType:e.truckType,date:e["available from"]}),children:"Allocate"})},t);if("allocated"==e.status&&"ALLOCATION"===n.toUpperCase())return(0,x.jsx)(l.Z,{children:(0,x.jsx)(u.Z,{variant:"contained",onClick:()=>{return n=e._id,N(n),void T(!0);var n},children:"View Allocation"})},t);if("VIEW DO"===n.toUpperCase()){const n=e["view DO"]||e.deliveryOrderId&&e.deliveryOrderId.doLink;return n?(0,x.jsx)(l.Z,{children:(0,x.jsx)(u.Z,{variant:"contained",onClick:()=>window.open(n,"_blank"),children:"View File"})},t):(0,x.jsx)(l.Z,{children:(0,x.jsx)(u.Z,{variant:"contained",disabled:!0,children:"No File"})},t)}return"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===n.toUpperCase()?(0,x.jsx)(l.Z,{children:e[`${n}`]?"Yes":"No"},t):"STATUS"===n.toUpperCase()?(0,x.jsx)(l.Z,{children:e[`${n}`]?"Active":"Inactive"},t):(0,x.jsx)(l.Z,{children:e[`${n}`]},t)})),p&&(0,x.jsx)(l.Z,{children:(0,x.jsx)(f.Z,{data:e,onActionChange:e=>{g(e)},actions:j})})]},n)))})]})}),y&&(0,x.jsx)(m.Z,{open:I,close:()=>{b(null),console.log("heeeeeeeeeeeeeeeeeeeeeeeey"),C(),T(!1)},doId:P,date:A,type:y}),w&&(0,x.jsx)(h.Z,{open:I,close:()=>{N(null),C(),T(!1)},doId:w})]})}},1217:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(7313),o=t(2832),a=t(8999),s=t(5266),i=t(7825),c=t(1113),l=t(4631),d=t(5480),u=t(1550),f=t(3306),m=t(4256),h=t(1405),x=t(3929),Z=t(24),p=t(1095),j=t(5627),g=t(1387),v=t(2186),C=t(1322),y=t(6417);function b(e){let{getParty:n,open:t,onClose:a,isEdit:s=!1,data:b={}}=e;const[A,S]=(0,r.useState)([]),[w,N]=(0,r.useState)(!1),{control:P,handleSubmit:k,formState:{errors:I},reset:T}=(0,j.cI)({defaultValues:{name:"",address:"",contactPerson:"",contactNumber:"",location:""}});return(0,r.useEffect)((()=>{(0,C.RY)().then((e=>S(e))).catch((e=>console.log(e)))}),[]),(0,r.useEffect)((()=>{s&&b&&(N((null===b||void 0===b?void 0:b.isTrailerAllowed)||!1),T({name:b.name||"",address:b.address||"",contactPerson:b.contactPerson||"",contactNumber:b.contactNumber||"",location:b.locationId||""}))}),[b,s,T]),(0,y.jsx)(v.Z,{open:t,fullWidth:!0,onClose:a,title:(s?"Edit":"Add")+" Party",children:(0,y.jsx)("form",{onSubmit:k((e=>{const t={...e,isTrailerAllowed:w};s?(console.log(t),console.log(b._id),(0,C.CE)(b._id,{name:e.name,address:e.address,locationId:e.location,contactPerson:e.contactPerson,contactNumber:e.contactNumber,isTrailerAllowed:w}).then((()=>{g.Am.success("Party updated successfully"),n(),a()})).catch((e=>{var n,t;g.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Operation failed")}))):(0,C.Q1)({name:e.name,address:e.address,locationId:e.location,contactPerson:e.contactPerson,contactNumber:e.contactNumber,isTrailerAllowed:w}).then((()=>{g.Am.success("Party added successfully"),n(),a()})).catch((e=>{var n,t;g.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Operation failed")}))})),children:(0,y.jsx)(i.Z,{children:(0,y.jsxs)(o.Z,{direction:"column",spacing:2,children:[(0,y.jsx)(c.Z,{variant:"h5",children:"Party Name"}),(0,y.jsx)(j.Qr,{name:"name",control:P,rules:{required:"Party Name is required"},render:e=>{let{field:n}=e;return(0,y.jsx)(l.Z,{...n,placeholder:"Enter Party Name"})}}),I.name&&(0,y.jsx)(d.Z,{error:!0,children:I.name.message}),(0,y.jsx)(c.Z,{variant:"h5",children:"Address"}),(0,y.jsx)(j.Qr,{name:"address",control:P,rules:{required:"Address is required"},render:e=>{let{field:n}=e;return(0,y.jsx)(l.Z,{...n,placeholder:"Enter Party Address"})}}),I.address&&(0,y.jsx)(d.Z,{error:!0,children:I.address.message}),(0,y.jsx)(c.Z,{variant:"h5",children:"Contact Person Name"}),(0,y.jsx)(j.Qr,{name:"contactPerson",control:P,rules:{required:"Contact Person is required"},render:e=>{let{field:n}=e;return(0,y.jsx)(l.Z,{...n,placeholder:"Enter Contact Person Name"})}}),I.contactPerson&&(0,y.jsx)(d.Z,{error:!0,children:I.contactPerson.message}),(0,y.jsx)(c.Z,{variant:"h5",children:"Contact Number"}),(0,y.jsx)(j.Qr,{name:"contactNumber",control:P,rules:{required:"Contact Number is required"},render:e=>{let{field:n}=e;return(0,y.jsx)(l.Z,{...n,placeholder:"Enter Contact Number"})}}),I.contactNumber&&(0,y.jsx)(d.Z,{error:!0,children:I.contactNumber.message}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(f.Z,{children:"Location"}),(0,y.jsx)(j.Qr,{name:"location",control:P,rules:{required:"Location is required"},render:e=>{let{field:n}=e;return(0,y.jsxs)(m.Z,{...n,children:[(0,y.jsx)(h.Z,{value:"",children:(0,y.jsx)("em",{children:"None"})}),A.map((e=>(0,y.jsx)(h.Z,{value:e._id,children:e.name},e._id)))]})}}),I.location&&(0,y.jsx)(d.Z,{error:!0,children:I.location.message})]}),(0,y.jsx)(u.Z,{children:(0,y.jsx)(x.Z,{control:(0,y.jsx)(Z.Z,{checked:w,onChange:()=>N(!w)}),label:"Is Trailer Allowed"})}),(0,y.jsx)(p.Z,{variant:"contained",type:"submit",children:s?"Update":"Add"})]})})})})}var A=t(4469),S=t(3604),w=t(6467),N=t(7762),P=t(4117);function k(e){let{open:n,onClose:t,onConfirm:r}=e;return(0,y.jsxs)(A.Z,{open:n,onClose:t,"aria-labelledby":"delete-confirm-dialog",children:[(0,y.jsx)(S.Z,{id:"delete-confirm-dialog",children:"Confirm Deletion"}),(0,y.jsx)(w.Z,{children:(0,y.jsx)(N.Z,{children:"Are you sure you want to delete this item? This action cannot be undone."})}),(0,y.jsxs)(P.Z,{children:[(0,y.jsx)(p.Z,{onClick:t,color:"primary",children:"Cancel"}),(0,y.jsx)(p.Z,{onClick:r,color:"error",variant:"contained",children:"Delete"})]})]})}const I=["name","address","contact person","contact number","status"];function T(e){let{data:n,updateData:t,navigation:o}=e;const[i,c]=(0,r.useState)(!1),[l,d]=(0,r.useState)(),[u,f]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),x=(0,s.h)(n,["name","address","contactPerson","contactNumber","status"],I),Z="admin"===localStorage.getItem("role");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b,{open:i,onClose:()=>c(!1),data:l,isEdit:m,getParty:t}),(0,y.jsx)(k,{open:u,onClose:()=>f(!1),onConfirm:()=>{console.log("Item deleted"),(0,C.T5)(l._id).then((()=>{g.Am.success("Party deleted successfully"),t()})).catch((e=>{var n,t;console.log(e),g.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Failed to delete")})),f(!1)}}),(0,y.jsx)(a.Z,{onClickAction:Z&&o,data:x,header:I,isShowSerialNo:!0,isShowAction:!Z,actions:["delete","Edit","UpdateStatus"],onActionChange:e=>{"delete"===e.action?(console.log(e),d(e.data),f(!0),console.log(e.data._id)):"Edit"===e.action?(d(e.data),h(!0),c(!0)):"UpdateStatus"===e.action&&(0,C.X6)(e.data._id).then((()=>{g.Am.success("Party status updated successfully"),t()})).catch((e=>{var n,t;console.log(e),g.Am.error((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Failed to update status")}))}})]})}var D=t(2040),_=t(3497);function E(e){let{buttonClick:n}=e;const t="both"===localStorage.getItem("role")||"forwarder"===localStorage.getItem("role");return(0,y.jsx)(_.Z,{children:(0,y.jsxs)(o.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)(c.Z,{variant:"h3",color:"secondary.main",children:"Manage Parties"}),t&&(0,y.jsx)(p.Z,{variant:"contained",startIcon:(0,y.jsx)(D.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:n,children:"Add Parties"})]})})}var M=t(7890);function R(){const[e,n]=(0,r.useState)(!1),[t,a]=(0,r.useState)([]),s=(0,M.s0)(),i=async()=>{try{const e=await(0,C.a2)();a(e)}catch(e){console.log(e)}};(0,r.useEffect)((()=>{i()}),[]);return(0,y.jsxs)(o.Z,{direction:"column",gap:2,children:[(0,y.jsx)(b,{open:e,getParty:i,onClose:()=>n(!1)}),(0,y.jsx)(E,{buttonClick:()=>n(!0)}),(0,y.jsx)(T,{navigation:async e=>{console.log(e),s("/doBooking/"+e)},data:t,updateData:i})]})}},4117:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(3366),o=t(7462),a=t(7313),s=t(4146),i=t(1921),c=t(7592),l=t(1033),d=t(7430),u=t(2298);function f(e){return(0,u.ZP)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var m=t(6417);const h=["className","disableSpacing"],x=(0,c.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})((e=>{let{ownerState:n}=e;return(0,o.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}));var Z=a.forwardRef((function(e,n){const t=(0,l.i)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:c=!1}=t,d=(0,r.Z)(t,h),u=(0,o.Z)({},t,{disableSpacing:c}),Z=(e=>{const{classes:n,disableSpacing:t}=e,r={root:["root",!t&&"spacing"]};return(0,i.Z)(r,f,n)})(u);return(0,m.jsx)(x,(0,o.Z)({className:(0,s.Z)(Z.root,a),ownerState:u,ref:n},d))}))},7762:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(3366),o=t(7462),a=t(7313),s=t(4146),i=t(1921),c=t(7592),l=t(3727),d=t(1033),u=t(1113),f=t(7430),m=t(2298);function h(e){return(0,m.ZP)("MuiDialogContentText",e)}(0,f.Z)("MuiDialogContentText",["root"]);var x=t(6417);const Z=["children","className"],p=(0,c.ZP)(u.Z,{shouldForwardProp:e=>(0,l.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,n)=>n.root})({});var j=a.forwardRef((function(e,n){const t=(0,d.i)({props:e,name:"MuiDialogContentText"}),{className:a}=t,c=(0,r.Z)(t,Z),l=(e=>{const{classes:n}=e,t=(0,i.Z)({root:["root"]},h,n);return(0,o.Z)({},n,t)})(c);return(0,x.jsx)(p,(0,o.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:c,className:(0,s.Z)(l.root,a)},t,{classes:l}))}))},6467:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(3366),o=t(7462),a=t(7313),s=t(4146),i=t(1921),c=t(7592),l=t(1033),d=t(7430),u=t(2298);function f(e){return(0,u.ZP)("MuiDialogContent",e)}(0,d.Z)("MuiDialogContent",["root","dividers"]);var m=t(3174),h=t(6417);const x=["className","dividers"],Z=(0,c.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.dividers&&n.dividers]}})((e=>{let{theme:n,ownerState:t}=e;return(0,o.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}:{[`.${m.Z.root} + &`]:{paddingTop:0}})}));var p=a.forwardRef((function(e,n){const t=(0,l.i)({props:e,name:"MuiDialogContent"}),{className:a,dividers:c=!1}=t,d=(0,r.Z)(t,x),u=(0,o.Z)({},t,{dividers:c}),m=(e=>{const{classes:n,dividers:t}=e,r={root:["root",t&&"dividers"]};return(0,i.Z)(r,f,n)})(u);return(0,h.jsx)(Z,(0,o.Z)({className:(0,s.Z)(m.root,a),ownerState:u,ref:n},d))}))}}]);