"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[13],{2186:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(3365),a=r(4469),o=r(3604),s=r(2832),i=r(1113),l=r(7313),c=r(1766),d=r(6417);const u=l.forwardRef((function(e,t){return(0,d.jsx)(n.Z,{ref:t,...e})}));function h(e){let{title:t,children:r,open:n,onClose:l,...h}=e;return(0,d.jsxs)(a.Z,{...h,open:n,TransitionComponent:u,children:[(0,d.jsx)(o.Z,{children:(0,d.jsxs)(s.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(i.Z,{variant:"h2",color:"primary.main",children:t}),(0,d.jsx)(c.Z,{sx:{cursor:"pointer"},onClick:l})]})}),r]})}},5266:function(e,t,r){r.d(t,{h:function(){return o}});var n=r(6031),a=r.n(n);const o=(e,t,r)=>e.map((e=>a().mapKeys(e,((e,n)=>{for(let a=0;a<r.length;a++)if(n===t[a])return r[a];return n}))))},7013:function(e,t,r){r.r(t),r.d(t,{default:function(){return X}});var n=r(7313),a=r(3497),o=r(1629),s=r(6835),i=r(3477),l=r(4076),c=r(7478),d=r(3467),u=r(1095),h=r(9848),m=r(6167),x=r(5842),p=r(658),f=r.n(p),g=r(6417);function j(e){let{data:t,header:r,isShowSerialNo:p=!1,isShowAction:j=!1,actions:Z=["Edit","Delete"],onActionChange:v,onClickAction:y,refreshData:b,addTruckBooking:C}=e;const[k,S]=(0,n.useState)(null),[T,I]=(0,n.useState)(null),[A,N]=(0,n.useState)(null),[w,D]=(0,n.useState)(null),[M,L]=(0,n.useState)(!1);return(0,g.jsxs)(a.Z,{children:[(0,g.jsx)(o.Z,{children:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(i.Z,{children:(0,g.jsxs)(l.Z,{children:[p&&(0,g.jsx)(c.Z,{sx:{color:"primary.main"},children:"SLNO"}),r.map(((e,t)=>(0,g.jsx)(c.Z,{sx:{color:"primary.main"},children:e},t))),(0,g.jsx)(c.Z,{sx:{color:"primary.main"},children:"Add To Queue"}),j&&(0,g.jsx)(c.Z,{sx:{color:"primary.main"},children:"Action"})]})}),(0,g.jsx)(d.Z,{children:t.map(((e,t)=>(0,g.jsxs)(l.Z,{onClick:()=>(e=>{y&&y(e)})(e._id),children:[p&&(0,g.jsx)(c.Z,{children:t+1}),r.map(((t,r)=>{if("IMAGE"===t.toUpperCase())return(0,g.jsx)(c.Z,{children:(0,g.jsx)("img",{style:{height:"100px"},src:`${e[`${t}`]}`,alt:"img"})},r);if("allocated"!=e.status&&"ALLOCATION"===t.toUpperCase())return console.log("dfffffffffffffffffffffffffffffffffffff"),console.log(e),(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",onClick:()=>(e=>{S(e.truckType),I(e.date),D(e.doId),console.log(e.truckType),L(!0)})({doId:e._id,truckType:e.truckType,date:e["available from"]}),children:"Allocate"})},r);if("allocated"==e.status&&"ALLOCATION"===t.toUpperCase())return(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",onClick:()=>{return t=e._id,N(t),void L(!0);var t},children:"View Allocation"})},r);if("VIEW DO"===t.toUpperCase()){const t=e["view DO"]||e.deliveryOrderId&&e.deliveryOrderId.doLink;return t?(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",onClick:()=>window.open(t,"_blank"),children:"View File"})},r):(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",disabled:!0,children:"No File"})},r)}return"isHighRangeArea"!=e.status&&"ISHIGHRANGEAREA"===t.toUpperCase()?(0,g.jsx)(c.Z,{children:e[`${t}`]?"Yes":"No"},r):"STATUS"===t.toUpperCase()?(0,g.jsx)(c.Z,{children:e[`${t}`]?"Active":"Inactive"},r):(0,g.jsx)(c.Z,{children:e[`${t}`]},r)})),(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",onClick:()=>(e=>{console.log("heyyyyy"),console.log(e);const t=f()(),r=f()(t).format("YYYY-MM-DD");C({truckId:e,availableFrom:r})})(e._id),children:"Add To Queue"})}),j&&(0,g.jsx)(c.Z,{children:(0,g.jsx)(h.Z,{data:e,onActionChange:e=>{v(e)},actions:Z})})]},t)))})]})}),k&&(0,g.jsx)(m.Z,{open:M,close:()=>{S(null),b(),L(!1)},doId:w,date:T,type:k}),A&&(0,g.jsx)(x.Z,{open:M,close:()=>{N(null),b(),L(!1)},doId:A})]})}var Z=r(5266),v=r(7825),y=r(2832),b=r(1550),C=r(1113),k=r(8797),S=r(1405),T=r(5480),I=r(4631),A=r(3306),N=r(5627),w=r(1387),D=r(2186),M=r(1322);function L(e){let{getTrucks:t,open:r,onClose:a,isEdit:o=!1,data:s={}}=e;const[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[h,m]=(0,n.useState)(""),{control:x,handleSubmit:p,formState:{errors:f},reset:j}=(0,N.cI)({defaultValues:o?{name:s.name,registrationNumber:s.RegNo,category:s.category,truckType:s.truckType,companyId:s.companyId,driverId:s.driverId}:""});(0,n.useEffect)((()=>{m(s.companyId),(0,M.r7)({companyTypes:["transporter","both"]}).then((e=>{d(e)})).catch((e=>{console.log(e),w.Am.error(e)}))}),[]);const Z=()=>{j(),m(""),a()};return(0,n.useEffect)((()=>{h?(0,M.Jq)({companyId:h}).then((e=>{l(e)})).catch((e=>{console.log(e)})):l([])}),[h]),(0,g.jsx)(D.Z,{open:r,fullWidth:!0,onClose:Z,title:(o?"Edit":"Add")+" Truck",children:(0,g.jsx)("form",{onSubmit:p((e=>{const r={name:e.name,registrationNumber:e.registrationNumber,driverId:e.driverId,category:e.category,companyId:e.companyId,truckType:e.type};o?(0,M.K3)(s._id,r).then((()=>{t(),Z()})).catch((e=>{var t,r;console.error(e),w.Am.error(null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)})):(0,M.Gu)(r).then((()=>{t(),Z()})).catch((e=>{var t,r;console.error(e),w.Am.error(null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)}))})),children:(0,g.jsx)(v.Z,{children:(0,g.jsxs)(y.Z,{direction:"column",sx:{p:2},spacing:1,children:[(0,g.jsxs)(b.Z,{error:Boolean(f.companyId),children:[(0,g.jsx)(C.Z,{variant:"h5",children:"Company"}),(0,g.jsx)(N.Qr,{name:"companyId",control:x,render:e=>{let{field:t}=e;return(0,g.jsxs)(k.Z,{...t,labelId:"type-select-label",id:"type-select",value:t.value||"",onChange:e=>{t.onChange(e.target.value),m(e.target.value)},children:[(0,g.jsx)(S.Z,{value:"",children:(0,g.jsx)("em",{children:"None"})}),c.map((e=>(0,g.jsxs)(S.Z,{value:e._id,children:[e.name," Mob: ",e.contactNumber," Address: ",e.address," "]},e._id)))]})},rules:{required:"Company is required"}}),f.companyId&&(0,g.jsx)(T.Z,{children:f.companyId.message})]}),(0,g.jsx)(C.Z,{variant:"h5",children:"Truck Name"}),(0,g.jsx)(N.Qr,{name:"name",control:x,render:e=>{let{field:t}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.Z,{...t,placeholder:"Enter Truck Name"}),f.name&&(0,g.jsx)("span",{style:{color:"#f00"},children:f.name.message})]})},rules:{required:"Truck Name is required"}}),(0,g.jsx)(C.Z,{variant:"h5",children:"Reg Number"}),(0,g.jsx)(N.Qr,{name:"registrationNumber",control:x,render:e=>{let{field:t}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.Z,{...t,placeholder:"Eg: KL40 A 1234"}),f.registrationNumber&&(0,g.jsx)("span",{style:{color:"#f00"},children:f.registrationNumber.message})]})},rules:{required:"Reg No is required"}}),(0,g.jsxs)(b.Z,{error:Boolean(f.driverId),disabled:!h,children:[(0,g.jsx)(A.Z,{id:"driver-select-label",children:"Driver"}),(0,g.jsx)(N.Qr,{name:"driverId",control:x,render:e=>{let{field:t}=e;return(0,g.jsxs)(k.Z,{...t,labelId:"driver-select-label",id:"driver-select",label:"Driver",value:t.value||"",onChange:e=>t.onChange(e.target.value),children:[(0,g.jsx)(S.Z,{value:"",children:(0,g.jsx)("em",{children:"None"})}),i.map((e=>(0,g.jsxs)(S.Z,{value:e._id,children:[e.name," Mob: ",e.contactNumber," Type: ",e.licenceType]},e._id)))]})}}),f.driverId&&(0,g.jsx)(T.Z,{children:f.driverId.message})]}),!h&&(0,g.jsx)(C.Z,{variant:"body2",color:"error",children:"Please select a company first to see the drivers."}),(0,g.jsxs)(b.Z,{error:Boolean(f.category),children:[(0,g.jsx)(A.Z,{id:"type-select-label",children:"Category"}),(0,g.jsx)(N.Qr,{name:"category",control:x,defaultValue:"MULTIAXIL",render:e=>{let{field:t}=e;return(0,g.jsxs)(k.Z,{...t,labelId:"type-select-label",id:"type-select",label:"category",onChange:e=>t.onChange(e.target.value),children:[(0,g.jsx)(S.Z,{value:"MULTIAXIL",children:"MULTIAXIL"}),(0,g.jsx)(S.Z,{value:"Trailer",children:"Trailer"}),(0,g.jsx)(S.Z,{value:"DA",children:"DA"})]})},rules:{required:"Category is required"}}),f.category&&(0,g.jsx)(T.Z,{children:f.category.message})]}),(0,g.jsxs)(b.Z,{error:Boolean(f.type),children:[(0,g.jsx)(A.Z,{id:"type-select-label",children:"Type"}),(0,g.jsx)(N.Qr,{name:"type",control:x,defaultValue:20,render:e=>{let{field:t}=e;return(0,g.jsxs)(k.Z,{...t,labelId:"type-select-label",id:"type-select",label:"Type",onChange:e=>t.onChange(e.target.value),children:[(0,g.jsx)(S.Z,{value:20,children:"20 FT"}),(0,g.jsx)(S.Z,{value:40,children:"40 FT"})]})},rules:{required:"Type is required"}}),f.type&&(0,g.jsx)(T.Z,{children:f.type.message})]}),(0,g.jsx)(u.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:"Add"})]})})})})}var W=r(9536),_=r(9019),E=r(4469),R=r(4117),$=r(6467),F=r(7762),G=r(3604),P=r(7131),Q=r(1198),O=r(4605),U=r(3208),q=r(5904),Y=r(57);function B(e){const[t,r]=n.useState(!1),[a,o]=n.useState(f()()),s=new Date,i=s,l=(0,Y.E)(s,30),c=new Date(i),d=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`,h=new Date(l),m=`${h.getFullYear()}-${String(h.getMonth()+3).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`,x=()=>{r(!1),e.onClose()};n.useEffect((()=>{r(e.open)}),[e]);return(0,g.jsx)(n.Fragment,{children:(0,g.jsx)(U._,{dateAdapter:q.y,children:(0,g.jsxs)(E.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:x,children:[(0,g.jsx)(G.Z,{children:"Select Date"}),(0,g.jsx)(P.Z,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,g.jsx)(Q.Z,{})}),(0,g.jsxs)($.Z,{children:[(0,g.jsx)(F.Z,{children:"Select FromDate from which truck is open for booking."}),(0,g.jsx)(W.Z,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content"},children:(0,g.jsx)(b.Z,{sx:{mt:2,minWidth:120},children:(0,g.jsx)(O.M,{label:"From Date",disabled:!0,value:a,onChange:e=>o(e),minDate:f()(d),maxDate:f()(m),renderInput:e=>(0,g.jsx)(I.Z,{...e})})})})]}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(u.Z,{variant:"contained",onClick:()=>{a||console.log("Please select a date");const t=f()(a).format("YYYY-MM-DD");let r=e.data._id;e.submit({truckId:r,availableFrom:t}),x()},children:"ADD TO QUEUE"})})]})})})}const V=["name","RegNo","category","truckType","company"];function z(e){let{data:t,updateData:r,addTruckBooking:a}=e;const[o,s]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(),[u,h]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),p=t.filter((e=>{const t=e.registrationNumber.toLowerCase().includes(u.toLowerCase()),r=e.companyName.toLowerCase().includes(m.toLowerCase());return t&&r})),f=(0,Z.h)(p,["name","registrationNumber","category","truckType","companyName"],V),v="admin"===localStorage.getItem("role");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W.Z,{sx:{mb:2},children:(0,g.jsxs)(_.ZP,{container:!0,spacing:2,children:[(0,g.jsx)(_.ZP,{item:!0,xs:6,md:4,children:(0,g.jsx)(I.Z,{label:"Search Registration Number",variant:"outlined",size:"small",fullWidth:!0,value:u,onChange:e=>h(e.target.value)})}),v&&(0,g.jsx)(_.ZP,{item:!0,xs:6,md:4,children:(0,g.jsx)(I.Z,{label:"Search Company",variant:"outlined",size:"small",fullWidth:!0,value:m,onChange:e=>x(e.target.value)})})]})}),o&&(0,g.jsx)(L,{getTrucks:r,open:o,onClose:()=>{r(),s(!1)},data:c,isEdit:!0}),(0,g.jsx)(B,{open:i,onClose:()=>{l(!1)},submit:a,data:c}),(0,g.jsx)(j,{data:f,header:V,isShowSerialNo:!0,isShowAction:!0,actions:v?["Add To Queue","Edit","delete"]:["Add To Queue","Edit"],onActionChange:async e=>{console.log(e),"delete"==e.action?(console.log(e.data._id),d(e.data),(0,M.$K)(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),w.Am.error(e.response.data.message)}))):"Add To Queue"==e.action?(d(e.data),l(!0),console.log("add to booking"),console.log(e.data._id)):"Edit"==e.action?(console.log("Edit"),s(!0),d(e.data)):d()},addTruckBooking:a})]})}var H=r(2040);function K(e){let{buttonClick:t}=e;const r="admin"===localStorage.getItem("role");return(0,g.jsx)(a.Z,{children:(0,g.jsxs)(y.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)(C.Z,{variant:"h3",color:"secondary.main",children:"Manage Trucks"}),r&&(0,g.jsx)(u.Z,{variant:"contained",startIcon:(0,g.jsx)(H.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:t,children:"Add Truck"})]})})}function X(){const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)([]),o=()=>{(0,M.aZ)().then((e=>{a(e)})).catch((e=>{console.log(e)}))};return(0,n.useEffect)((()=>{o()}),[]),(0,g.jsxs)(y.Z,{direction:"column",gap:2,children:[(0,g.jsx)(L,{open:e,getTrucks:o,onClose:()=>{t(!1)}}),(0,g.jsx)(K,{buttonClick:()=>t(!0)}),(0,g.jsx)(z,{data:r,updateData:o,addTruckBooking:e=>{console.log("heeeeeeeeeee"),(0,M.Pe)({truckId:e.truckId,availableFrom:e.availableFrom}).then((()=>{w.Am.success("Truck Added to Queue")})).catch((e=>{console.log(e),w.Am.error(e.response.data.message)}))}})]})}},2040:function(e,t,r){var n=r(1171),a=r(6417);t.Z=(0,n.Z)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},1766:function(e,t,r){var n=r(1171),a=r(6417);t.Z=(0,n.Z)((0,a.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded")},7825:function(e,t,r){r.d(t,{Z:function(){return C}});var n=r(3366),a=r(7462),o=r(7313),s=r(4146),i=r(2298),l=r(1921),c=r(8831),d=r(4614),u=r(6694),h=r(1821),m=r(6417);const x=["className","component","disableGutters","fixed","maxWidth","classes"],p=(0,h.Z)(),f=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,c.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),g=e=>(0,d.Z)({props:e,name:"MuiContainer",defaultTheme:p}),j=(e,t)=>{const{classes:r,fixed:n,disableGutters:a,maxWidth:o}=e,s={root:["root",o&&`maxWidth${(0,c.Z)(String(o))}`,n&&"fixed",a&&"disableGutters"]};return(0,l.Z)(s,(e=>(0,i.ZP)(t,e)),r)};var Z=r(1615),v=r(7592),y=r(1033);const b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=f,useThemeProps:r=g,componentName:i="MuiContainer"}=e,l=t((e=>{let{theme:t,ownerState:r}=e;return(0,a.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!r.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:r}=e;return r.fixed&&Object.keys(t.breakpoints.values).reduce(((e,r)=>{const n=r,a=t.breakpoints.values[n];return 0!==a&&(e[t.breakpoints.up(n)]={maxWidth:`${a}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:r}=e;return(0,a.Z)({},"xs"===r.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},r.maxWidth&&"xs"!==r.maxWidth&&{[t.breakpoints.up(r.maxWidth)]:{maxWidth:`${t.breakpoints.values[r.maxWidth]}${t.breakpoints.unit}`}})})),c=o.forwardRef((function(e,t){const o=r(e),{className:c,component:d="div",disableGutters:u=!1,fixed:h=!1,maxWidth:p="lg"}=o,f=(0,n.Z)(o,x),g=(0,a.Z)({},o,{component:d,disableGutters:u,fixed:h,maxWidth:p}),Z=j(g,i);return(0,m.jsx)(l,(0,a.Z)({as:d,ownerState:g,className:(0,s.Z)(Z.root,c),ref:t},f))}));return c}({createStyledComponent:(0,v.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,Z.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,y.i)({props:e,name:"MuiContainer"})});var C=b},7762:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(3366),a=r(7462),o=r(7313),s=r(4146),i=r(1921),l=r(7592),c=r(3727),d=r(1033),u=r(1113),h=r(7430),m=r(2298);function x(e){return(0,m.ZP)("MuiDialogContentText",e)}(0,h.Z)("MuiDialogContentText",["root"]);var p=r(6417);const f=["children","className"],g=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,c.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var j=o.forwardRef((function(e,t){const r=(0,d.i)({props:e,name:"MuiDialogContentText"}),{className:o}=r,l=(0,n.Z)(r,f),c=(e=>{const{classes:t}=e,r=(0,i.Z)({root:["root"]},x,t);return(0,a.Z)({},t,r)})(l);return(0,p.jsx)(g,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,s.Z)(c.root,o)},r,{classes:c}))}))},57:function(e,t,r){function n(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}r.d(t,{E:function(){return o}});function a(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function o(e,t){const r=n(e);return isNaN(t)?a(e,NaN):t?(r.setDate(r.getDate()+t),r):r}}}]);