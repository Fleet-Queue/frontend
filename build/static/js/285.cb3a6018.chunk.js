"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[285],{2186:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(3365),a=r(4469),o=r(3604),s=r(2832),i=r(1113),l=r(7313),c=r(1766),d=r(6417);const u=l.forwardRef((function(e,t){return(0,d.jsx)(n.Z,{ref:t,...e})}));function m(e){let{title:t,children:r,open:n,onClose:l,...m}=e;return(0,d.jsxs)(a.Z,{...m,open:n,TransitionComponent:u,children:[(0,d.jsx)(o.Z,{children:(0,d.jsxs)(s.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(i.Z,{variant:"h2",color:"primary.main",children:t}),(0,d.jsx)(c.Z,{sx:{cursor:"pointer"},onClick:l})]})}),r]})}},5285:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var n=r(7313),a=r(8999),o=r(5266),s=r(7825),i=r(2832),l=r(1550),c=r(3306),d=r(4256),u=r(1405),m=r(5480),h=r(1113),x=r(4631),p=r(1095),g=r(5627),f=r(1387),j=r(2186),Z=r(1322),b=r(6417);function y(e){let{getTrucks:t,open:r,onClose:a,isEdit:o=!1,data:y={}}=e;const[v,k]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[T,D]=(0,n.useState)(""),{control:N,handleSubmit:w,formState:{errors:A},reset:I}=(0,g.cI)({defaultValues:o?{name:y.name,registrationNumber:y.RegNo,category:y.category,truckType:y.truckType}:""});(0,n.useEffect)((()=>{(0,Z.r7)({companyTypes:["transporter","both"]}).then((e=>{console.log(e),S(e)})).catch((e=>{console.log(e),f.Am.error(e)}))}),[]);const M=()=>{I(),D(""),a()};return(0,n.useEffect)((()=>{T?(0,Z.Jq)({companyId:T}).then((e=>{console.log(e),k(e)})).catch((e=>{console.log(e)})):k([])}),[T]),(0,b.jsx)(j.Z,{open:r,fullWidth:!0,onClose:M,title:(o?"Edit":"Add")+" Truck",children:(0,b.jsx)("form",{onSubmit:w((e=>{console.log(e),(0,Z.Gu)({name:e.name,registrationNumber:e.registrationNumber,driverId:e.driver,category:e.category,companyId:e.company,truckType:e.type}).then((e=>{console.log(e),t(),M()})).catch((e=>{console.error(e),f.Am.error(e)}))})),children:(0,b.jsx)(s.Z,{children:(0,b.jsxs)(i.Z,{direction:"column",sx:{p:2},spacing:1,children:[(0,b.jsxs)(l.Z,{error:Boolean(A.driver),children:[(0,b.jsx)(c.Z,{id:"type-select-label",children:"Company"}),(0,b.jsx)(g.Qr,{name:"company",control:N,render:e=>{let{field:t}=e;return(0,b.jsxs)(d.Z,{...t,labelId:"type-select-label",id:"type-select",label:"company",value:t.value||"",onChange:e=>{t.onChange(e.target.value),D(e.target.value)},children:[(0,b.jsx)(u.Z,{value:"",children:(0,b.jsx)("em",{children:"None"})}),C.map((e=>(0,b.jsxs)(u.Z,{value:e._id,children:[e.name," Mob: ",e.contactNumber," Address: ",e.address," "]},e._id)))]})},rules:{required:"Company is required"}}),A.company&&(0,b.jsx)(m.Z,{children:A.company.message})]}),(0,b.jsx)(h.Z,{variant:"h5",children:"Truck Name"}),(0,b.jsx)(g.Qr,{name:"name",control:N,render:e=>{let{field:t}=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Z,{...t,placeholder:"Enter Truck Name"}),A.name&&(0,b.jsx)("span",{style:{color:"#f00"},children:A.name.message})]})},rules:{required:"Truck Name is required"}}),(0,b.jsx)(h.Z,{variant:"h5",children:"Reg Number"}),(0,b.jsx)(g.Qr,{name:"registrationNumber",control:N,render:e=>{let{field:t}=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Z,{...t,placeholder:"Eg: KL40 A 1234"}),A.registrationNumber&&(0,b.jsx)("span",{style:{color:"#f00"},children:A.registrationNumber.message})]})},rules:{required:"Reg No is required"}}),(0,b.jsxs)(l.Z,{error:Boolean(A.driver),disabled:!T,children:[(0,b.jsx)(c.Z,{id:"driver-select-label",children:"Driver"}),(0,b.jsx)(g.Qr,{name:"driver",control:N,render:e=>{let{field:t}=e;return(0,b.jsxs)(d.Z,{...t,labelId:"driver-select-label",id:"driver-select",label:"Driver",value:t.value||"",onChange:e=>t.onChange(e.target.value),children:[(0,b.jsx)(u.Z,{value:"",children:(0,b.jsx)("em",{children:"None"})}),v.map((e=>(0,b.jsxs)(u.Z,{value:e._id,children:[e.name," Mob: ",e.contactNumber," Type: ",e.licenceType]},e._id)))]})},rules:{required:"Driver is required"}}),A.driver&&(0,b.jsx)(m.Z,{children:A.driver.message})]}),!T&&(0,b.jsx)(h.Z,{variant:"body2",color:"error",children:"Please select a company first to see the drivers."}),(0,b.jsxs)(l.Z,{error:Boolean(A.category),children:[(0,b.jsx)(c.Z,{id:"type-select-label",children:"Category"}),(0,b.jsx)(g.Qr,{name:"category",control:N,defaultValue:"MULTIAXIL",render:e=>{let{field:t}=e;return(0,b.jsxs)(d.Z,{...t,labelId:"type-select-label",id:"type-select",label:"category",onChange:e=>t.onChange(e.target.value),children:[(0,b.jsx)(u.Z,{value:"MULTIAXIL",children:"MULTIAXIL"}),(0,b.jsx)(u.Z,{value:"Trailer",children:"Trailer"}),(0,b.jsx)(u.Z,{value:"DA",children:"DA"})]})},rules:{required:"Category is required"}}),A.category&&(0,b.jsx)(m.Z,{children:A.category.message})]}),(0,b.jsxs)(l.Z,{error:Boolean(A.type),children:[(0,b.jsx)(c.Z,{id:"type-select-label",children:"Type"}),(0,b.jsx)(g.Qr,{name:"type",control:N,defaultValue:20,render:e=>{let{field:t}=e;return(0,b.jsxs)(d.Z,{...t,labelId:"type-select-label",id:"type-select",label:"Type",onChange:e=>t.onChange(e.target.value),children:[(0,b.jsx)(u.Z,{value:20,children:"20 FT"}),(0,b.jsx)(u.Z,{value:40,children:"40 FT"})]})},rules:{required:"Type is required"}}),A.type&&(0,b.jsx)(m.Z,{children:A.type.message})]}),(0,b.jsx)(p.Z,{variant:"contained",type:"submit",sx:{width:"150px"},children:"Add"})]})})})})}var v=r(9536),k=r(4469),C=r(4117),S=r(6467),T=r(7762),D=r(3604),N=r(7131),w=r(1198),A=r(8444),I=r(3208),M=r(5904),W=r(57),R=r(658),_=r.n(R);function E(e){const[t,r]=n.useState(!1),[a,o]=n.useState(null),s=new Date,i=s,c=(0,W.E)(s,30),d=new Date(i),u=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,m=new Date(c),h=`${m.getFullYear()}-${String(m.getMonth()+3).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,g=()=>{r(!1),e.onClose()};n.useEffect((()=>{r(e.open)}),[e]);return(0,b.jsx)(n.Fragment,{children:(0,b.jsx)(I._,{dateAdapter:M.y,children:(0,b.jsxs)(k.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:g,children:[(0,b.jsx)(D.Z,{children:"Select Date"}),(0,b.jsx)(N.Z,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,b.jsx)(w.Z,{})}),(0,b.jsxs)(S.Z,{children:[(0,b.jsx)(T.Z,{children:"Select FromDate from which truck is open for booking."}),(0,b.jsx)(v.Z,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content"},children:(0,b.jsx)(l.Z,{sx:{mt:2,minWidth:120},children:(0,b.jsx)(A.M,{label:"From Date",value:a,onChange:e=>o(e),minDate:_()(u),maxDate:_()(h),renderInput:e=>(0,b.jsx)(x.Z,{...e})})})})]}),(0,b.jsx)(C.Z,{children:(0,b.jsx)(p.Z,{variant:"contained",onClick:()=>{a||console.log("Please select a date");const t=_()(a).format("YYYY-MM-DD");console.log(t),console.log(a),console.log(e.data);let r=e.data._id;e.submit({truckId:r,availableFrom:t}),g()},children:"ADD TO QUEUE"})})]})})})}const F=["name","RegNo","category","truckType"];function L(e){let{data:t,updateData:r,addTruckBooking:s}=e;const[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(),h=(0,o.h)(t,["name","registrationNumber","category","truckType"],F),x="admin"===localStorage.getItem("role");return(0,b.jsxs)(b.Fragment,{children:[i&&(0,b.jsx)(y,{open:i,onClose:()=>{l(!1)},data:u,isEdit:!0}),(0,b.jsx)(E,{open:c,onClose:()=>{d(!1)},submit:s,data:u}),(0,b.jsx)(a.Z,{data:h,header:F,isShowSerialNo:!0,isShowAction:!0,actions:x?["Add To Queue","Edit","delete"]:["Add To Queue"],onActionChange:async e=>{console.log(e),"delete"==e.action?(console.log(e.data._id),m(e.data),(0,Z.$K)(e.data._id).then((()=>{r()})).catch((e=>{console.error(e),f.Am.error(e.response.data.message)}))):"Add To Queue"==e.action?(m(e.data),d(!0),console.log("add to booking"),console.log(e.data._id)):"Edit"==e.action?(console.log("Edit"),l(!0),m(e.data)):m()}})]})}var $=r(2040),q=r(3497);function G(e){let{buttonClick:t}=e;const r="admin"===localStorage.getItem("role");return(0,b.jsx)(q.Z,{children:(0,b.jsxs)(i.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsx)(h.Z,{variant:"h3",color:"secondary.main",children:"Manage Trucks"}),r&&(0,b.jsx)(p.Z,{variant:"contained",startIcon:(0,b.jsx)($.Z,{}),sx:{backgroundColor:"secondary.main"},onClick:t,children:"Add Truck"})]})})}function Q(){const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)([]),o=()=>{(0,Z.aZ)().then((e=>{a(e)})).catch((e=>{console.log(e)}))};return(0,n.useEffect)((()=>{o()}),[]),(0,b.jsxs)(i.Z,{direction:"column",gap:2,children:[(0,b.jsx)(y,{open:e,getTrucks:o,onClose:()=>{t(!1)}}),(0,b.jsx)(G,{buttonClick:()=>t(!0)}),(0,b.jsx)(L,{data:r,updateData:o,addTruckBooking:e=>{(0,Z.Pe)({truckId:e.truckId,availableFrom:e.availableFrom}).then((()=>{f.Am.success("Truck Added to Queue")})).catch((e=>{console.log(e),f.Am.error(e.response.data.message)}))}})]})}},1766:function(e,t,r){var n=r(1171),a=r(6417);t.Z=(0,n.Z)((0,a.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded")},7825:function(e,t,r){r.d(t,{Z:function(){return k}});var n=r(3366),a=r(7462),o=r(7313),s=r(4146),i=r(1167),l=r(8007),c=r(1179),d=r(4614),u=r(6694),m=r(1821),h=r(6417);const x=["className","component","disableGutters","fixed","maxWidth","classes"],p=(0,m.Z)(),g=(0,u.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,c.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),f=e=>(0,d.Z)({props:e,name:"MuiContainer",defaultTheme:p}),j=(e,t)=>{const{classes:r,fixed:n,disableGutters:a,maxWidth:o}=e,s={root:["root",o&&`maxWidth${(0,c.Z)(String(o))}`,n&&"fixed",a&&"disableGutters"]};return(0,l.Z)(s,(e=>(0,i.ZP)(t,e)),r)};var Z=r(1615),b=r(7592),y=r(7342);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=g,useThemeProps:r=f,componentName:i="MuiContainer"}=e,l=t((e=>{let{theme:t,ownerState:r}=e;return(0,a.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!r.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:r}=e;return r.fixed&&Object.keys(t.breakpoints.values).reduce(((e,r)=>{const n=r,a=t.breakpoints.values[n];return 0!==a&&(e[t.breakpoints.up(n)]={maxWidth:`${a}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:r}=e;return(0,a.Z)({},"xs"===r.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},r.maxWidth&&"xs"!==r.maxWidth&&{[t.breakpoints.up(r.maxWidth)]:{maxWidth:`${t.breakpoints.values[r.maxWidth]}${t.breakpoints.unit}`}})})),c=o.forwardRef((function(e,t){const o=r(e),{className:c,component:d="div",disableGutters:u=!1,fixed:m=!1,maxWidth:p="lg"}=o,g=(0,n.Z)(o,x),f=(0,a.Z)({},o,{component:d,disableGutters:u,fixed:m,maxWidth:p}),Z=j(f,i);return(0,h.jsx)(l,(0,a.Z)({as:d,ownerState:f,className:(0,s.Z)(Z.root,c),ref:t},g))}));return c}({createStyledComponent:(0,b.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,Z.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,y.Z)({props:e,name:"MuiContainer"})});var k=v},7762:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(3366),a=r(7462),o=r(7313),s=r(4146),i=r(8007),l=r(7592),c=r(3727),d=r(7342),u=r(1113),m=r(4363),h=r(1167);function x(e){return(0,h.ZP)("MuiDialogContentText",e)}(0,m.Z)("MuiDialogContentText",["root"]);var p=r(6417);const g=["children","className"],f=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,c.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var j=o.forwardRef((function(e,t){const r=(0,d.Z)({props:e,name:"MuiDialogContentText"}),{className:o}=r,l=(0,n.Z)(r,g),c=(e=>{const{classes:t}=e,r=(0,i.Z)({root:["root"]},x,t);return(0,a.Z)({},t,r)})(l);return(0,p.jsx)(f,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,s.Z)(c.root,o)},r,{classes:c}))}))},57:function(e,t,r){function n(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}r.d(t,{E:function(){return o}});function a(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function o(e,t){const r=n(e);return isNaN(t)?a(e,NaN):t?(r.setDate(r.getDate()+t),r):r}}}]);